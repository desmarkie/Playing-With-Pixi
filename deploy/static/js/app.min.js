/**
 * cor media 2014
 * @author: Mark Dooney (Desmarkie) 
 **/
var AABB,App,BasicGrid,ColourConversion,CometParticle,CometSparkParticle,Comets,Dots,Fractals,Grid,MathUtils,Menu,Node,Orbits,PWPData,Penrose,PictureTile,Plankton,PlanktonTank,Point,QuadTree,QuadTreeTest,Radar,Ribbon,ShapeShifter,SineWave,Sketch,Smoky,Spirals,Spirograph,SpirographNode,SquidNode,Squids,Stacks,TessellationOne,Trails,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};Sketch=function(){function a(a,b){this.renderer=a,this.name=b,this.view=new PIXI.DisplayObjectContainer,this.cancelled=!1,this.loaded=!1,this.stage=null,this.gui=null}return a.prototype.load=function(){return this.cancelled=!1,this.loaded=!0,null},a.prototype.unload=function(){return this.cancelled=!0,null},a.prototype.update=function(){return this.cancelled?void 0:null},a.prototype.resize=function(){return null},a.prototype.makeGui=function(){return this.gui=new dat.GUI({autoPlace:!1}),this.gui.domElement.style.zIndex=100,this.gui.domElement.style.position="absolute",this.gui.domElement.style.top=0,this.gui.domElement.style.left=0,this.gui.domElement.style.height="auto",this.gui.close(),null},a}(),Point=function(){function a(a,b,c){this.x=null!=a?a:0,this.y=null!=b?b:0,this.z=null!=c?c:0,this.toString=__bind(this.toString,this),this.clone=__bind(this.clone,this)}return a.prototype.clone=function(){return new a(this.x,this.y,this.z)},a.prototype.toString=function(){return"Point [x:"+this.x+", y:"+this.y+", z:"+this.z+"]"},a}(),Grid=function(){function a(a,b){this.width=null!=a?a:10,this.height=null!=b?b:10,this.pool=[],this.tiles=this.createTiles()}return a.prototype.createTiles=function(){var a,b,c,d,e,f;for(b={},c=d=0,a=e=0,f=this.width*this.height;f>=0?f>e:e>f;a=f>=0?++e:--e)b[c+"_"+d]=this.getTile(c,d),c++,c===this.width&&(c=0,d++);return b},a.prototype.getTile=function(a,b){var c;return 0!==this.pool.length?(c=this.pool.splice(0,1)[0],c.x=a,c.y=b,c):new Point(a,b)},a}(),BasicGrid=function(a){function b(a,c){this.renderer=a,this.name=c,this.drawGrid=__bind(this.drawGrid,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){return this.loaded||(this.makeGui(),this.sprites=[],this.pool=[],this.spriteSize=32,this.curTile=null,this.gridWidth=25,this.gridHeight=25,this.viewSize=.75*Math.min(window.innerWidth,window.innerHeight),this.gridSize=this.viewSize/Math.max(this.gridWidth,this.gridHeight),this.gridHolder=new PIXI.DisplayObjectContainer,this.view.addChild(this.gridHolder),this.drawGrid(),this.xpos=-1,this.ypos=-1,this.gui.add(this,"gridWidth",1,200,1),this.gui.add(this,"gridHeight",1,200,1),this.gui.add(this,"drawGrid"),this.gui.add(this,"xpos").listen(),this.gui.add(this,"ypos").listen()),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a;return b.__super__.update.call(this),this.cancelled?void 0:(this.xpos=Math.round((window.app.pointerPosition.x-this.gridHolder.position.x)/this.gridSize)-1,this.ypos=Math.round((window.app.pointerPosition.y-this.gridHolder.position.y)/this.gridSize)-1,a=this.xpos+"_"+this.ypos,this.xpos>=0&&this.xpos<this.gridWidth&&this.ypos>=0&&this.ypos<this.gridHeight&&this.grid.tiles[a].sprite!==this.curTile&&(null!==this.curTile&&(TweenMax.to(this.curTile,5,{alpha:0,ease:Power4.easeOut}),TweenMax.to(this.curTile.scale,5,{x:0,y:0,ease:Power4.easeOut})),this.curTile=this.grid.tiles[a].sprite,TweenMax.to(this.curTile,.3,{alpha:1,ease:Power4.easeOut}),TweenMax.to(this.curTile.scale,.3,{x:1,y:1,ease:Power4.easeOut})),null)},b.prototype.resize=function(){return null},b.prototype.drawGrid=function(){var a,b,c,d;for(this.grid=new Grid(this.gridWidth,this.gridHeight),this.gridSize=this.viewSize/Math.max(this.gridWidth,this.gridHeight),this.tileSprite=this.createTileSprite();this.sprites.length>0;)this.pool.push(this.sprites.splice(0,1)[0]);d=this.grid.tiles;for(b in d)a=d[b],c=this.getTile(a.x*this.gridSize,a.y*this.gridSize),c.alpha=c.scale.x=c.scale.y=0,a.sprite=c,this.sprites.push(c),this.gridHolder.addChild(c);return this.gridHolder.position.x=.5*(window.innerWidth-this.gridWidth*this.gridSize),this.gridHolder.position.y=.5*(window.innerHeight-this.gridHeight*this.gridSize),null},b.prototype.getTile=function(a,b){var c;return c=null,this.pool.length>0?(c=this.pool.splice(0,1)[0],c.setTexture(this.tileSprite)):c=new PIXI.Sprite(this.tileSprite),c.anchor.x=c.anchor.y=.5,c.position.x=a+this.gridSize,c.position.y=b+this.gridSize,c},b.prototype.createTileSprite=function(){var a;return a=new PIXI.Graphics,a.beginFill(16777215),a.drawRect(0,0,this.gridSize,this.gridSize),a.endFill(),a.generateTexture()},b}(Sketch),ColourConversion=function(){function a(){}return a.hexToRgb=function(a){var b;return b=[],b.push(a>>16),b.push(a>>8&255),b.push(255&a),b},a.rgbToHex=function(a){var b;return b=a[0]<<16^a[1]<<8^a[2]},a.hsbToRgb=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return f=a[0]/360,k=a[1]/100,m=a[2]/100,g=Math.floor(6*f),d=6*f-g,h=m*(1-k),i=m*(1-d*k),l=m*(1-(1-d)*k),c=g%6,0===c&&(j=m,e=l,b=h),1===c&&(j=i,e=m,b=h),2===c&&(j=h,e=m,b=l),3===c&&(j=h,e=i,b=m),4===c&&(j=l,e=h,b=m),5===c&&(j=m,e=h,b=i),[255*j,255*e,255*b]},a.rgbToHsb=function(a){var b,c,d,e,f,g;return a[0]/=255,a[1]/=255,a[2]/=255,g=Math.min(Math.min(a[0],a[1]),a[2]),f=Math.max(Math.max(a[0],a[1]),a[2]),g===f?[void 0,0,100*f]:(b=g===a[0]?a[1]-a[2]:g===a[1]?a[2]-a[0]:a[0]-a[1],d=g===a[0]?3:g===a[1]?5:1,c=Math.floor(60*(d-b/(f-g)))%360,e=Math.floor((f-g)/f*100),f=Math.floor(100*f),[c,e,f])},a.hsbToHex=function(b){var c;return c=a.hsbToRgb(b),a.rgbToHex(c)},a.hexToHsb=function(b){var c;return c=a.hexToRgb(b),a.rgbToHsb(c)},a}(),Node=function(){function a(a,b,c){null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),this.fillPositions=__bind(this.fillPositions,this),this.checkPositionsLength=__bind(this.checkPositionsLength,this),this.moveTo=__bind(this.moveTo,this),this.position=new Point(a,b,c),this.velocity=new Point,this.positions=[],this.positions.push(this.position.clone()),this.recordedPositions=1}return a.prototype.moveTo=function(a,b,c){return null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),this.position.x=a,this.position.y=b,this.position.z=c,this.positions.push(this.position.clone()),this.checkPositionsLength(),null},a.prototype.checkPositionsLength=function(){for(;this.positions.length>this.recordedPositions;)this.positions.splice(0,1);return null},a.prototype.fillPositions=function(){for(;this.positions.length<this.recordedPositions;)this.positions.push(this.position.clone());return null},a}(),CometSparkParticle=function(a){function b(a,c,d){null==a&&(a=0),null==c&&(c=0),null==d&&(d=0),this.update=__bind(this.update,this),this.setColor=__bind(this.setColor,this),this.newLife=__bind(this.newLife,this),b.__super__.constructor.call(this,a,c,d),this.life=0,this.totalLife=0,this.minLife=10,this.maxLife=30,this.minSpeed=.4,this.maxSpeed=1.5,this.recordedPositions=30,this.fillPositions(),this.newLife(),this.hsb=[300,66,100],this.hex=ColourConversion.hsbToHex(this.hsb),this.view=new PIXI.Sprite(window.app.textures[0]),this.view.pivot.x=this.view.pivot.y=16,this.view.tint=this.hex}return __extends(b,a),b.prototype.newLife=function(){return this.totalLife=Math.round(this.minLife+Math.random()*(this.maxLife-this.minLife)),this.life=this.totalLife,this.velocity.x=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed),this.velocity.y=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed),Math.random()<.5&&(this.velocity.x*=-1),Math.random()<.5&&(this.velocity.y*=-1),null},b.prototype.setColor=function(a){return this.hsb[0]=a,this.hex=ColourConversion.hsbToHex(this.hsb),this.view.tint=this.hex,null},b.prototype.update=function(){return 0!==this.life?(this.moveTo(this.position.x+this.velocity.x,this.position.y+this.velocity.y,this.position.z+this.velocity.z),this.life--,this.view.scale.x=this.view.scale.y=.1+.3*Math.random(),this.view.alpha=.2+1.2*Math.random(),this.view.position.x=this.position.x,this.view.position.y=this.position.y,null):void 0},b}(Node),CometParticle=function(a){function b(a,c,d){var e,f,g;for(null==a&&(a=0),null==c&&(c=0),null==d&&(d=0),this.newSpark=__bind(this.newSpark,this),this.fireSpark=__bind(this.fireSpark,this),this.updateSparks=__bind(this.updateSparks,this),this.update=__bind(this.update,this),this.headForMouse=__bind(this.headForMouse,this),this.randomiseVelocity=__bind(this.randomiseVelocity,this),this.setSparkColor=__bind(this.setSparkColor,this),this.setColor=__bind(this.setColor,this),b.__super__.constructor.call(this,a,c,d),this.life=240,this.totalLife=240,this.maxSpeed=40,this.minSpeed=20,this.children=[],this.pool=[],this.maxChildren=5,this.recordedPositions=30,this.fillPositions(),this.view=new PIXI.DisplayObjectContainer,this.view.position.x=this.position.x,this.view.position.y=this.position.y,this.main=new PIXI.Sprite(window.app.textures[0]),this.main.pivot.x=this.main.pivot.y=16,this.color=240,this.setColor(this.color),this.sparkColor=300,this.view.addChild(this.main),e=f=0,g=this.maxChildren;g>=0?g>f:f>g;e=g>=0?++f:--f)this.fireSpark()}return __extends(b,a),b.prototype.setColor=function(a){var b,c;return this.color=a,c=[this.color,18,100],b=ColourConversion.hsbToHex(c),this.main.tint=b,null},b.prototype.setSparkColor=function(a){var b,c,d,e;for(this.sparkColor=a,e=this.children,c=0,d=e.length;d>c;c++)b=e[c],b.setColor(this.sparkColor);return null},b.prototype.randomiseVelocity=function(a,b){return null==a&&(a=!0),null==b&&(b=!0),a&&(this.velocity.x=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed)),b&&(this.velocity.y=-(.1*this.maxSpeed)+.2*Math.random()*this.maxSpeed),null},b.prototype.headForMouse=function(){var a,b,c;return a=25,b=window.app.pointerPosition.x-this.position.x,c=window.app.pointerPosition.y-this.position.y,this.velocity.x=b/a,this.velocity.y=c/a,null},b.prototype.update=function(){if(0!==this.life){for(this.moveTo(this.position.x+this.velocity.x,this.position.y+this.velocity.y,this.position.z+this.velocity.z),this.velocity.x*=.98,this.velocity.y*=.98,this.velocity.z*=.98,this.life--,this.main.scale.x=this.main.scale.y=.7+2*Math.random(),this.view.alpha=this.life/this.totalLife,this.view.position.x=this.position.x,this.view.position.y=this.position.y,this.updateSparks();this.children.length<this.maxChildren;)this.fireSpark();return null}},b.prototype.updateSparks=function(){var a,b,c,d;for(a=c=d=this.children.length-1;c>=0;a=c+=-1)b=this.children[a],b.update(),0===b.life&&(this.children.splice(a,1),this.pool.push(b),this.view.removeChild(b.view));return null},b.prototype.fireSpark=function(){var a;return a=this.newSpark(),this.children.push(a),this.view.addChild(a.view),null},b.prototype.newSpark=function(){var a;return this.pool.length>0?(a=this.pool[0],this.pool.splice(0,1)):(a=new CometSparkParticle,a.setColor(this.sparkColor)),a.position.x=0,a.position.y=0,a.positions=[],a.fillPositions(),a.newLife(),a},b}(Node),Comets=function(a){function b(a,c){this.renderer=a,this.name=c,this.resize=__bind(this.resize,this),this.newTimeLimit=__bind(this.newTimeLimit,this),this.newComet=__bind(this.newComet,this),this.setCometColors=__bind(this.setCometColors,this),this.fireComet=__bind(this.fireComet,this),this.drawPaths=__bind(this.drawPaths,this),this.setSparkColor=__bind(this.setSparkColor,this),this.setTrailColor=__bind(this.setTrailColor,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.particles=[],b.prototype.pool=[],b.prototype.load=function(){var a=this;return this.loaded||(this.makeGui(),this.maxComets=40,this.minFrames=5,this.maxFrames=10,this.timeLimit=0,this.cometColor=240,this.sparkColor=300,this.trailColor=240,this.trailHsb=[0,18,100],this.setTrailColor(this.trailColor),this.newTimeLimit(),this.gui.add(this,"maxComets",1,100),this.gui.add(this,"minFrames",1,100),this.gui.add(this,"maxFrames",1,100),this.gui.add(this,"cometColor",0,360).onFinishChange(function(){return a.setCometColors()}),this.gui.add(this,"trailColor",0,360).onChange(function(){return a.setTrailColor(a.trailColor)}),this.gui.add(this,"sparkColor",0,360).onChange(function(){return a.setSparkColor(a.sparkColor)}),this.graphics=new PIXI.Graphics,this.view.addChild(this.graphics)),this.timeout=1,b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e;if(b.__super__.update.call(this),!this.cancelled){for(this.timeout--,0===this.timeout&&(this.particles.length<this.maxComets?(this.newTimeLimit(),this.timeout=this.timeLimit,this.fireComet()):this.timeout++),c=d=e=this.particles.length-1;d>=0;c=d+=-1)a=this.particles[c],a.randomiseVelocity(!1),window.app.mousePressed&&a.headForMouse(),a.update(),(0===a.life||a.position.x>window.innerWidth)&&(this.particles.splice(c,1),this.pool.push(a),this.view.removeChild(a.view));return this.drawPaths(),null}},b.prototype.setTrailColor=function(a){return this.trailColor=a,this.trailHsb[0]=this.trailColor,this.trailHex=ColourConversion.hsbToHex(this.trailHsb),null},b.prototype.setSparkColor=function(a){var b,c,d,e;for(this.sparkColor=a,e=this.particles,c=0,d=e.length;d>c;c++)b=e[c],b.setSparkColor(this.sparkColor);return null},b.prototype.drawPaths=function(){var a,b,c,d,e,f,g,h;for(this.graphics.clear(),g=this.particles,d=0,f=g.length;f>d;d++)for(a=g[d],c=1/a.positions.length,b=e=0,h=a.positions.length-2;h>=0?h>=e:e>=h;b=h>=0?++e:--e)this.graphics.lineStyle(1,this.trailHex,b*c*(a.life/a.totalLife)),this.graphics.moveTo(a.positions[b].x,a.positions[b].y),this.graphics.lineTo(a.positions[b+1].x,a.positions[b+1].y);return null},b.prototype.fireComet=function(){var a;return a=this.newComet(),this.particles.push(a),this.view.addChild(a.view),null},b.prototype.setCometColors=function(){var a,b,c,d;for(d=this.particles,b=0,c=d.length;c>b;b++)a=d[b],a.setColor(this.cometColor);return null},b.prototype.newComet=function(){var a;return 0===this.pool.length?a=new CometParticle:(a=this.pool[0],this.pool.splice(0,1)),a.setColor(this.cometColor),a.setSparkColor(this.sparkColor),a.position.x=0,a.position.y=Math.random()*window.innerHeight,a.randomiseVelocity(),a.positions=[],a.fillPositions(),a.life=a.totalLife,a},b.prototype.newTimeLimit=function(){return this.timeLimit=Math.round(this.minFrames+Math.random()*(this.maxFrames-this.minFrames)),null},b.prototype.resize=function(){return null},b}(Sketch),Dots=function(a){function b(a){this.renderer=a,this.handleMouseMove=__bind(this.handleMouseMove,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),this.updateGui=__bind(this.updateGui,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.id="Dots",b.prototype.dots=[],b.prototype.deadDots=[],b.prototype.xCounter=0,b.prototype.xLimit=0,b.prototype.xDir=1,b.prototype.yCounter=0,b.prototype.yLimit=0,b.prototype.yDir=1,b.prototype.curX=0,b.prototype.curY=0,b.prototype.mouseX=0,b.prototype.mouseY=0,b.prototype.easeX=0,b.prototype.easeY=0,b.prototype.spriteSize=32,b.prototype.invert=!0,b.prototype.mouseTrail=!0,b.prototype.xFollow=!1,b.prototype.xBounce=!0,b.prototype.xLeft=!1,b.prototype.xRight=!1,b.prototype.xOff=!1,b.prototype.lastX="follow",b.prototype.yFollow=!1,b.prototype.yBounce=!1,b.prototype.yUp=!1,b.prototype.yDown=!0,b.prototype.yOff=!1,b.prototype.lastY="follow",b.prototype.updateGui=function(){var a,b,c,d;for(d=this.gui.__controllers,b=0,c=d.length;c>b;b++)a=d[b],a.updateDisplay();return null},b.prototype.load=function(){var a=this;return this.loaded||(this.createSprites(),this.makeGui(),this.gui.add(this,"spriteSize",16,128,8).onFinishChange(function(b){return a.spriteSize=b,a.resize()}),this.gui.add(this,"invert"),this.gui.add(this,"mouseTrail"),this.gui.add(this,"xFollow").onChange(function(b){return a.xFollow=b,(a.xFollow=!0)?a.xBounce=a.xLeft=a.xRight=a.xOff=!1:(a.lastX="follow",a.xBounce=a.xLeft=a.xRight=!1,a.xOff=!0),a.updateGui()}),this.gui.add(this,"xBounce").onChange(function(b){return a.xFollow=b,(a.xBounce=!0)?a.xFollow=a.xLeft=a.xRight=a.xOff=!1:(a.lastX="bounce",a.xFollow=a.xLeft=a.xRight=!1,a.xOff=!0),a.updateGui()}),this.gui.add(this,"xLeft").onChange(function(b){return a.xFollow=b,(a.xLeft=!0)?(a.xDir=-1,a.xFollow=a.xBounce=a.xRight=a.xOff=!1):(a.lastX="left",a.xFollow=a.xBounce=a.xRight=!1,a.xOff=!0),a.updateGui()}),this.gui.add(this,"xRight").onChange(function(b){return a.xFollow=b,(a.xRight=!0)?(a.xDir=1,a.xFollow=a.xBounce=a.xLeft=a.xOff=!1):(a.lastX="right",a.xFollow=a.xBounce=a.xLeft=!1,a.xOff=!0),a.updateGui()}),this.gui.add(this,"xOff").onChange(function(b){return a.xOff=b,a.xOff?(a.xFollow?a.lastX="follow":a.xBounce?a.lastX="bounce":a.xLeft?a.lastX="left":a.xRight&&(a.lastX="right"),a.xFollow=a.xBounce=a.xLeft=a.xRight=!1):"follow"===a.lastX?a.xFollow=!0:"bounce"===a.lastX?a.xBounce=!0:"left"===a.lastX?a.xLeft=!0:"right"===a.lastX&&(a.xRight=!0),a.updateGui()}),this.gui.add(this,"yFollow").onChange(function(b){return a.yFollow=b,(a.yFollow=!0)?a.yBounce=a.yUp=a.yDown=a.yOff=!1:(a.lastY="follow",a.yBounce=a.yUp=a.yDown=!1,a.yOff=!0),a.updateGui()}),this.gui.add(this,"yBounce").onChange(function(b){return a.yFollow=b,(a.yBounce=!0)?a.yFollow=a.yUp=a.yDown=a.yOff=!1:(a.lastY="bounce",a.yFollow=a.yUp=a.yDown=!1,a.yOff=!0),a.updateGui()}),this.gui.add(this,"yUp").onChange(function(b){return a.yFollow=b,(a.yUp=!0)?(a.yDir=-1,a.yFollow=a.yBounce=a.yDown=a.yOff=!1):(a.lastY="left",a.yFollow=a.yBounce=a.yDown=!1,a.yOff=!0),a.updateGui()}),this.gui.add(this,"yDown").onChange(function(b){return a.yFollow=b,(a.yDown=!0)?(a.yDir=1,a.yFollow=a.yBounce=a.yUp=a.yOff=!1):(a.lastY="right",a.yFollow=a.yBounce=a.yUp=!1,a.yOff=!0),a.updateGui()}),this.gui.add(this,"yOff").onChange(function(b){return a.yOff=b,a.yOff?(a.yFollow?a.lastY="follow":a.yBounce?a.lastY="bounce":a.yUp?a.lastY="up":a.yDown&&(a.lastY="down"),a.yFollow=a.yBounce=a.yUp=a.yDown=!1):"follow"===a.lastY?a.yFollow=!0:"bounce"===a.lastY?a.yBounce=!0:"up"===a.lastY?a.yUp=!0:"down"===a.lastY&&(a.yDown=!0),a.updateGui()}),this.gui.close()),b.__super__.load.call(this),this.xLimit=this.dots.length,this.yLimit=this.dots[0].length,null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e,f,g,h,i;if(b.__super__.update.call(this),!this.cancelled){for(this.handleMouseMove(),this.xFollow&&(this.xCounter=this.curX),this.yFollow&&(this.yCounter=this.curY),a=f=0,h=this.xCount;h>=f;a=f+=1)for(c=g=0,i=this.yCount;i>=g;c=g+=1)d=this.dots[a][c],e=1,this.invert&&(e=0),this.xOff||a!==this.xCounter||(d.alpha=e,d.scale.x=d.scale.y=e*(this.spriteSize/32)),this.yOff||c!==this.yCounter||(d.alpha=e,d.scale.x=d.scale.y=e*(this.spriteSize/32)),this.invert?d.alpha<1&&(d.alpha+=.05,d.scale.x+=.05,d.scale.y+=.05,d.alpha>1&&(d.alpha=1),d.scale.x>1&&(d.scale.x=d.scale.y=this.spriteSize/32)):d.alpha>0&&(d.alpha-=.05,d.scale.x-=.05,d.scale.y-=.05,d.alpha<0&&(d.alpha=0),d.scale.x<0&&d.scale.x-(d.scale.y=0));return this.xOff||(this.xCounter+=this.xDir,this.xLeft||this.xRight?(this.xCounter%=this.xLimit,this.xCounter<0&&(this.xCounter=this.xLimit-1)):this.xBounce&&(this.xCounter===this.xLimit?(this.xCounter=this.xLimit-2,this.xDir*=-1):this.xCounter<0&&(this.xCounter=1,this.xDir*=-1))),this.yOff||(this.yCounter+=this.yDir,this.yUp||this.yDown?(this.yCounter%=this.yLimit,this.yCounter<0&&(this.yCounter=this.yLimit-1)):this.yBounce&&(this.yCounter===this.yLimit?(this.yCounter=this.yLimit-2,this.yDir*=-1):this.yCounter<0&&(this.yCounter=1,this.yDir*=-1))),this.easeX+=(this.mouseX-this.easeX)/45,this.easeY+=(this.mouseY-this.easeY)/45,this.curX=Math.floor(this.easeX/this.spriteSize),this.curY=Math.floor(this.easeY/this.spriteSize),null}},b.prototype.resize=function(){var a,b,c,d,e,f;if(this.loaded){for(a=c=e=this.dots.length-1;c>=0;a=c+=-1)for(b=d=f=this.dots[a].length-1;d>=0;b=d+=-1)this.view.removeChild(this.dots[a][b]),this.dots[a].splice(b,1);this.dots=[],this.createSprites(),this.xLimit=this.dots.length,this.yLimit=this.dots[0].length}return null},b.prototype.handleMouseMove=function(){var a,b,c;return this.mouseX=window.app.pointerPosition.x,this.mouseY=window.app.pointerPosition.y,this.mouseTrail&&(b=Math.floor(this.mouseX/this.spriteSize),c=Math.floor(this.mouseY/this.spriteSize),a=1,this.invert&&(a=0),this.dots[b][c].alpha=a,this.dots[b]&&this.dots[b][c-1]&&(this.dots[b][c-1].alpha=a,this.dots[b][c-1].scale.x=this.dots[b][c-1].scale.y=a*(this.spriteSize/32)),this.dots[b]&&this.dots[b][c+1]&&(this.dots[b][c+1].alpha=a,this.dots[b][c+1].scale.x=this.dots[b][c+1].scale.y=a*(this.spriteSize/32)),this.dots[b-1]&&this.dots[b-1][c]&&(this.dots[b-1][c].alpha=a,this.dots[b-1][c].scale.x=this.dots[b-1][c].scale.y=a*(this.spriteSize/32)),this.dots[b+1]&&this.dots[b+1][c]&&(this.dots[b+1][c].alpha=a,this.dots[b+1][c].scale.x=this.dots[b+1][c].scale.y=a*(this.spriteSize/32))),null},b.prototype.createSprites=function(){var a,b,c,d,e,f,g;for(this.xCount=Math.round(window.innerWidth/this.spriteSize),this.yCount=Math.round(window.innerHeight/this.spriteSize),a=d=0,f=this.xCount;f>=d;a=d+=1)for(this.dots[a]=[],b=e=0,g=this.yCount;g>=e;b=e+=1)0===this.deadDots.length?c=new PIXI.Sprite(window.app.textures[0]):(c=this.deadDots[0],this.deadDots.splice(0,1)),c.scale.x=c.scale.y=this.spriteSize/32,c.position.x=a*this.spriteSize,c.position.y=b*this.spriteSize,this.dots[a][b]=c,c.alpha=0,this.view.addChild(c);return null},b}(Sketch),Fractals=function(a){function b(a,c){this.renderer=a,this.name=c,this.getSprite=__bind(this.getSprite,this),this.addSprite=__bind(this.addSprite,this),this.redraw=__bind(this.redraw,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.minSize=32,b.prototype.startSize=400,b.prototype.divisor=2.5,b.prototype.sprites=[],b.prototype.deadSprites=[],b.prototype.load=function(){var a=this;return this.loaded||(this.makeGui(),this.renderTex=new PIXI.RenderTexture(window.innerWidth,window.innerHeight),this.renderView=new PIXI.Sprite(this.renderTex),this.view.addChild(this.renderView),this.sprite=new PIXI.Sprite(window.app.textures[0]),this.sprite.pivot.x=this.sprite.pivot.y=16,this.canvas=new PIXI.DisplayObjectContainer,this.gui.add(this,"minSize",1,1e3).listen().onChange(function(){return a.startSize<a.minSize?a.minSize=a.startSize:void 0}).onFinishChange(function(){return a.redraw()}),this.gui.add(this,"startSize",10,1e3).listen().onChange(function(){return a.startSize<a.minSize?a.minSize=a.startSize:void 0}).onFinishChange(function(){return a.redraw()}),this.gui.add(this,"divisor",2,6).onFinishChange(function(){return a.redraw()})),this.createSprites(),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){return b.__super__.update.call(this),this.cancelled?void 0:null},b.prototype.resize=function(){return this.redraw(),null},b.prototype.redraw=function(){return this.renderView&&(this.renderTex.destroy(),this.renderTex=new PIXI.RenderTexture(window.innerWidth,window.innerHeight),this.renderView.setTexture(this.renderTex),this.sprites=[],this.createSprites()),null},b.prototype.createSprites=function(){return this.addSprite(.5*window.innerWidth,.5*window.innerHeight,this.startSize),null},b.prototype.addSprite=function(a,b,c){var d=this;return this.sprite.position.x=a,this.sprite.position.y=b,this.sprite.scale.x=this.sprite.scale.y=c/32,this.canvas.addChild(this.sprite),this.renderTex.render(this.canvas),this.canvas.removeChild(this.sprite),c>this.minSize?setTimeout(function(){return d.addSprite(a+c/d.divisor,b,c/d.divisor),d.addSprite(a-c/d.divisor,b,c/d.divisor),d.addSprite(a,b+c/d.divisor,c/d.divisor),d.addSprite(a,b-c/d.divisor,c/d.divisor)},500):void 0},b.prototype.getSprite=function(){return 0===this.deadSprites.length?new PIXI.Sprite(window.app.textures[0]):this.deadSprites.splice(0,1)[0]},b}(Sketch),MathUtils=function(){function a(){}return a.degToRadValue=Math.PI/180,a.radToDegValue=180/Math.PI,a.twoPI=2*Math.PI,a.goldenRatio=(1+Math.sqrt(5))/2,a.degToRad=function(b){return b*a.degToRadValue},a.radToDeg=function(b){return b*a.radToDegValue},a}(),Orbits=function(a){function b(a,c){this.renderer=a,this.name=c,this.drawTail=__bind(this.drawTail,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){var a,c,d,e,f,g;if(!this.loaded){for(this.makeGui(),this.midx=.5*window.innerWidth,this.midy=.5*window.innerHeight,this.baseNode=new Node(this.midx,this.midy),this.baseNode.xSin=0,this.baseNode.ySin=0,this.baseNode.xIncrement=19.6,this.baseNode.yIncrement=35.2,this.baseNode.xOffset=726,this.baseNode.yOffset=217,this.numSattelites=10,this.easing=50,this.tailLength=60,this.tailWidth=6.2,this.initialSpacing=60,this.nodes=[],this.maxSpeed=175,this.tailColour=9236991,a=f=0,g=this.numSattelites-1;g>=0?g>=f:f>=g;a=g>=0?++f:--f)d=this.midx+Math.cos(Math.random()*Math.PI)*this.initialSpacing,e=this.midy+Math.sin(Math.random()*Math.PI)*this.initialSpacing,c=new Node(d,e),c.recordedPositions=this.tailLength,c.fillPositions(),this.nodes.push(c);this.graphics=new PIXI.Graphics,this.view.addChild(this.graphics),this.gui.addColor(this,"tailColour"),this.gui.add(this,"tailWidth",2,100),this.gui.add(this,"maxSpeed",2,1e3),this.gui.add(this,"easing",2,100),this.gui.add(this.baseNode,"xOffset",0,1e3),this.gui.add(this.baseNode,"yOffset",0,1e3),this.gui.add(this.baseNode,"xIncrement",.1,359.9),this.gui.add(this.baseNode,"yIncrement",.1,359.9)}return b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e,f,g,h,i;if(b.__super__.update.call(this),!this.cancelled){for(this.graphics.clear(),this.baseNode.xSin+=this.baseNode.xIncrement,this.baseNode.xSin%=360,this.baseNode.ySin+=this.baseNode.yIncrement,this.baseNode.ySin%=360,this.baseNode.position.x=this.midx+Math.cos(MathUtils.degToRad(this.baseNode.xSin))*this.baseNode.xOffset,this.baseNode.position.y=this.midy+Math.cos(MathUtils.degToRad(this.baseNode.ySin))*this.baseNode.yOffset,a=h=0,i=this.numSattelites-1;i>=0?i>=h:h>=i;a=i>=0?++h:--h)c=this.nodes[a],f=this.baseNode.position.x-c.position.x,g=this.baseNode.position.y-c.position.y,c.velocity.x+=f/this.easing,c.velocity.y+=g/this.easing,c.velocity.x>this.maxSpeed?c.velocity.x=this.maxSpeed:c.velocity.x<-this.maxSpeed&&(c.velocity.x=-this.maxSpeed),c.velocity.y>this.maxSpeed?c.velocity.y=this.maxSpeed:c.velocity.y<-this.maxSpeed&&(c.velocity.y=-this.maxSpeed),d=c.position.x+c.velocity.x,e=c.position.y+c.velocity.y,c.moveTo(d,e),this.drawTail(c);return null}},b.prototype.resize=function(){return null},b.prototype.drawTail=function(a){var b,c,d,e,f,g,h;for(c=1/this.tailLength,f=this.tailWidth/this.tailLength,b=g=0,h=this.tailLength-2;h>=0?h>=g:g>=h;b=h>=0?++g:--g)this.tailWidth>1?this.graphics.lineStyle(f*b,this.tailColour,b*c):this.graphics.lineStyle(this.tailWidth,this.tailColour,b*c),d=a.positions[b],e=a.positions[b+1],this.graphics.moveTo(d.x,d.y),this.graphics.lineTo(e.x,e.y);return null},b}(Sketch),Penrose=function(a){function b(a,c){this.renderer=a,this.name=c,this.getColour=__bind(this.getColour,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){var a,c,d,e,f,g,h=this;for(this.loaded||(this.makeGui(),this.canvas=new PIXI.Graphics,this.view.addChild(this.canvas),this.canvas.position.x=.5*window.innerWidth,this.canvas.position.y=.5*window.innerHeight,this.colA=3223857,this.colB=10944261,this.gui.addColor(this,"colA").name("Colour A").onChange(function(){return"string"==typeof h.colA&&(h.colA=h.colA.replace("#","0x"),h.colA=parseInt(h.colA)),h.drawTriangles(h.triangles,h.iterations+1)}),this.gui.addColor(this,"colB").name("Colour B").onChange(function(){return"string"==typeof h.colB&&(h.colB=h.colB.replace("#","0x"),h.colB=parseInt(h.colB)),h.drawTriangles(h.triangles,h.iterations+1)})),this.triangles=[],d=g=0;10>g;d=++g)a=36*d,c=36*(d+1),c%=360,f={colour:0,a:[0,0],b:[50*Math.cos(MathUtils.degToRad(a)),50*Math.sin(MathUtils.degToRad(a))],c:[50*Math.cos(MathUtils.degToRad(c)),50*Math.sin(MathUtils.degToRad(c))]},d%2===0&&(e=f.b,f.b=f.c,f.c=e),this.triangles.push(f);return this.iterations=0,this.waiting=!1,this.drawTriangles(this.triangles,1+this.iterations),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){return b.__super__.update.call(this),this.cancelled?void 0:(window.app.mousePressed&&!this.waiting?this.waiting=!0:!window.app.mousePressed&&this.waiting&&(this.waiting=!1,this.iterations<7&&(this.triangles=this.subdivideTriangles(this.triangles),this.iterations++,this.drawTriangles(this.triangles,1+this.iterations))),null)},b.prototype.resize=function(){return null},b.prototype.drawTriangles=function(a,b){var c,d,e;for(null==b&&(b=10),this.canvas.clear(),this.canvas.lineStyle(1,0),d=0,e=a.length;e>d;d++)c=a[d],1===c.colour?this.canvas.beginFill(this.getColour(c.a,this.colB)):this.canvas.beginFill(this.getColour(c.a,this.colA)),this.canvas.moveTo(c.b[0]*b,c.b[1]*b),this.canvas.lineTo(c.a[0]*b,c.a[1]*b),this.canvas.lineTo(c.c[0]*b,c.c[1]*b),this.canvas.endFill();return this.canvas.lineStyle(null)},b.prototype.getColour=function(a,b){var c,d,e,f;return e=a[0]*(this.iterations+1),f=a[1]*(this.iterations+1),d=ColourConversion.hexToHsb(b),c=Math.sqrt(e*e+f*f),d[0]+=120*(c/window.innerHeight),ColourConversion.hsbToHex(d)},b.prototype.findMidpoint=function(a,b){var c;return c=[],c.push(a[0]+(b[0]-a[0])/MathUtils.goldenRatio),c.push(a[1]+(b[1]-a[1])/MathUtils.goldenRatio),c},b.prototype.subdivideTriangles=function(a){var b,c,d,e,f,g,h;for(b=[],g=0,h=a.length;h>g;g++)f=a[g],0===f.colour?(c=this.findMidpoint(f.a,f.b),b.push({colour:0,a:f.c,b:c,c:f.b}),b.push({colour:1,a:c,b:f.c,c:f.a})):(d=this.findMidpoint(f.b,f.a),e=this.findMidpoint(f.b,f.c),b.push({colour:1,a:e,b:f.c,c:f.a}),b.push({colour:1,a:d,b:e,c:f.b}),b.push({colour:0,a:e,b:d,c:f.a}));return b},b}(Sketch),PictureTile=function(a){function b(a,c){this.renderer=a,this.name=c,this.drawPixels=__bind(this.drawPixels,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.handleVideoError=__bind(this.handleVideoError,this),this.handleVideo=__bind(this.handleVideo,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){var a,c,d,e,f,g,h,i,j;if(!this.loaded)for(this.isConnected=!1,this.camWidth=40,this.camHeight=30,this.size=20,this.video=document.createElement("video"),this.video.setAttribute("autoplay","true"),this.video.setAttribute("width",this.camWidth),this.video.setAttribute("height",this.camHeight),this.video.id="videoElement",this.video.style.position="absolute",this.video.style.top=0,this.video.style.left=0,this.video.style.zIndex=10,this.video.style.width=this.camWidth+"px",this.video.style.height=this.camHeight+"px",this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",this.camWidth),this.canvas.setAttribute("height",this.camHeight),this.canvas.style.width=this.camWidth+"px",this.canvas.style.height=this.camHeight+"px",this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=this.camWidth+"px",this.canvas.style.zIndex=10,e=.5*(window.innerWidth-this.camWidth*this.size)+16,f=.5*(window.innerHeight-this.camHeight*this.size)+16,this.sprites=[],a=g=0,i=this.camWidth;i>=0?i>g:g>i;a=i>=0?++g:--g)for(this.sprites[a]=[],c=h=0,j=this.camHeight;j>=0?j>h:h>j;c=j>=0?++h:--h)d=new PIXI.Sprite(window.app.textures[0]),d.pivot.x=d.pivot.y=16,d.position.x=e+a*this.size,d.position.y=f+c*this.size,d.scale.x=d.scale.y=this.size/32,this.view.addChild(d),this.sprites[a][c]=d;
return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:!0},this.handleVideo,this.handleVideoError),b.__super__.load.call(this),null},b.prototype.handleVideo=function(a){return this.isConnected=!0,this.localStream=a,this.video.src=window.URL.createObjectURL(this.localStream),null},b.prototype.handleVideoError=function(a){return console&&console.log("ERROR :: \n"+a),null},b.prototype.unload=function(){return this.localStream&&(this.isConnected=!1,this.localStream.stop()),b.__super__.unload.call(this),null},b.prototype.update=function(){return b.__super__.update.call(this),this.cancelled?void 0:(this.isConnected&&(this.canvas.getContext("2d").drawImage(this.video,0,0,this.camWidth,this.camHeight),this.drawPixels()),null)},b.prototype.resize=function(){return null},b.prototype.drawPixels=function(){var a,b,c,d,e,f,g,h,i,j,k;for(a=this.canvas.getContext("2d").getImageData(0,0,this.camWidth,this.camHeight).data,h=0,i=0,d=j=0,k=a.length;k>j;d=j+=4)g=this.sprites[h][i],f=[a[d],a[d+1],a[d+2]],b=ColourConversion.rgbToHex(f),g.tint=b,c=ColourConversion.hexToHsb(b),e=.01*c[2],g.scale.x=g.scale.y=this.size/32*1.5*e,h++,h===this.camWidth&&(h=0,i++);return null},b}(Sketch),PlanktonTank=function(a){function b(a,c){this.renderer=a,this.name=c,this.resize=__bind(this.resize,this),this.addPlankton=__bind(this.addPlankton,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){return this.loaded||(this.numPlankton=30,this.plankton=[],this.addPlankton()),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e;if(b.__super__.update.call(this),!this.cancelled){for(e=this.plankton,c=0,d=e.length;d>c;c++)a=e[c],a.update();return null}},b.prototype.addPlankton=function(){var a,b,c,d;for(a=c=0,d=this.numPlankton;d>=0?d>c:c>d;a=d>=0?++c:--c)b=new Plankton,this.plankton.push(b),this.view.addChild(b.view);return null},b.prototype.resize=function(){return null},b}(Sketch),AABB=function(){function a(a,b){this.center=a,this.dimensions=b,this.calculatePoints()}return a.prototype.containsPoint=function(a){return a.x>=this.xMin&&a.x<=this.xMax&&a.y>=this.yMin&&a.y<=this.yMax?!0:!1},a.prototype.intersectsAABB=function(a){return a.center.x<this.center.x?a.xMin<=this.xMax&&a.yMin<=this.yMax&&a.xMax>=this.xMin&&a.yMax>=this.yMin:this.xMin<=a.xMax&&this.yMin<=a.yMax&&this.xMax>=a.xMin&&this.yMax>=a.yMin},a.prototype.setCenter=function(a){return this.center=a,this.calculatePoints()},a.prototype.setDimensions=function(a){return this.dimensions=a,this.calculatePoints()},a.prototype.calculatePoints=function(){return this.xMin=this.center.x-.5*this.dimensions.x,this.xMax=this.center.x+.5*this.dimensions.x,this.yMin=this.center.y-.5*this.dimensions.y,this.yMax=this.center.y+.5*this.dimensions.y,this.points=[],this.points.push(new Point(this.xMin,this.yMin)),this.points.push(new Point(this.xMax,this.yMin)),this.points.push(new Point(this.xMax,this.yMax)),this.points.push(new Point(this.xMin,this.yMax)),null},a}(),QuadTree=function(){function a(a,b,c,d){this.boundsAABB=a,this.maxCapacity=null!=b?b:1,this.maxLevels=null!=c?c:10,this.level=null!=d?d:0,this.points=[],this.children=[]}return a.TOP_LEFT=0,a.TOP_RIGHT=1,a.BOTTOM_LEFT=2,a.BOTTOM_RIGHT=3,a.prototype.insert=function(a){var b,c;if(this.children.length>0&&(c=this.getIndex(a),-1!==c))return this.children[c].insert(a),void 0;if(this.points.push(a),this.points.length>this.maxCapacity&&this.level<this.maxLevels)for(0===this.children.length&&this.subdivide(),b=0;b<this.points.length;)c=this.getIndex(this.points[b]),-1!==c?this.children[c].insert(this.points.splice(b,1)[0]):b++;return null},a.prototype.subdivide=function(){var b,c,d,e,f;return e=.5*this.boundsAABB.dimensions.x,d=.5*this.boundsAABB.dimensions.y,c=new Point(e,d),f=this.level+1,b=new Point(this.boundsAABB.xMin+.5*e,this.boundsAABB.yMin+.5*d),this.tl=new a(new AABB(b,c),this.maxCapacity,this.maxLevels,f),b=new Point(this.boundsAABB.xMin+e+.5*e,this.boundsAABB.yMin+.5*d),this.tr=new a(new AABB(b,c),this.maxCapacity,this.maxLevels,f),b=new Point(this.boundsAABB.xMin+.5*e,this.boundsAABB.yMin+d+.5*d),this.bl=new a(new AABB(b,c),this.maxCapacity,this.maxLevels,f),b=new Point(this.boundsAABB.xMin+e+.5*e,this.boundsAABB.yMin+d+.5*d),this.br=new a(new AABB(b,c),this.maxCapacity,this.maxLevels,f),this.children=[this.tl,this.tr,this.bl,this.br],null},a.prototype.getIndex=function(a){var b,c,d;return c=-1,d=a.center.y>this.boundsAABB.yMin&&a.center.y<=this.boundsAABB.center.y,b=a.center.y>this.boundsAABB.center.y&&a.center.y<=this.boundsAABB.yMax,a.center.x>this.boundsAABB.xMin&&a.center.x<=this.boundsAABB.center.x?d?c=0:b&&(c=2):a.center.x>this.boundsAABB.center.x&&a.center.x<=this.boundsAABB.xMax&&(d?c=1:b&&(c=3)),c},a.prototype.retrieve=function(a){var b,c,d,e,f,g;if(d=this.getIndex(a),b=this.points,this.children.length>0)if(-1!==d)b=b.concat(this.children[d].retrieve(a));else for(g=this.children,e=0,f=g.length;f>e;e++)c=g[e],b=b.concat(c.retrieve(a));return b},a.prototype.clear=function(){var a,b,c,d;for(this.points=[],d=this.children,b=0,c=d.length;c>b;b++)a=d[b],a.clear();return this.children=[],null},a}(),QuadTreeTest=function(a){function b(a,c){this.renderer=a,this.name=c,this.getColour=__bind(this.getColour,this),this.circleFill=__bind(this.circleFill,this),this.colourTree=__bind(this.colourTree,this),this.drawTree=__bind(this.drawTree,this),this.generateNewMap=__bind(this.generateNewMap,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name),this.numPoints=20,this.points=[],this.pointSprites=[],this.deadSprites=[]}return __extends(b,a),b.prototype.load=function(){var a,c,d=this;return this.loaded||(this.makeGui(),this.moving=!0,this.render=!1,this.circles=!1,this.childless=!1,a=new PIXI.Graphics,a.beginFill(15987699),a.drawCircle(0,0,5),a.endFill(),this.circleTex=a.generateTexture(),this.canvasHolder=new PIXI.DisplayObjectContainer,this.view.addChild(this.canvasHolder),this.canvas=new PIXI.Graphics,this.canvasHolder.addChild(this.canvas),this.pointHolder=new PIXI.DisplayObjectContainer,this.pointHolder.alpha=0,this.view.addChild(this.pointHolder),c=Math.min(window.innerWidth-50,window.innerHeight-50),this.bounds=new AABB(new Point(.5*window.innerWidth,.5*window.innerHeight),new Point(c,c)),this.tree=new QuadTree(this.bounds,1,10,0),this.gui.add(this,"moving").name("Motion On").listen(),this.gui.add(this,"render").name("Colour Fill").listen(),this.gui.add(this,"circles").name("Circles").listen(),this.gui.add(this,"childless").name("Only Smallest").listen(),this.gui.add(this,"numPoints",2,1e3,1).name("Points").onChange(function(){return d.numPoints>225&&d.moving?d.moving=!1:void 0}),this.gui.add(this,"generateNewMap").name("Generate"),this.gui.add(this.pointHolder,"alpha",0,1).name("Points Alpha"),this.renderSprite=new PIXI.Sprite(this.canvasHolder.generateTexture()),this.canvasHolder.addChild(this.renderSprite),this.renderSprite.alpha=0,this.canvasHolder.addChild(this.canvas)),this.waiting=!1,this.generateNewMap(),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e,f,g,h;if(b.__super__.update.call(this),!this.cancelled){if(window.app.mousePressed&&!this.waiting?this.waiting=!0:!window.app.mousePressed&&this.waiting&&(this.waiting=!1,this.generateNewMap()),this.moving){for(a=0,this.tree.clear(),h=this.points,f=0,g=h.length;g>f;f++)e=h[f],c=e.center.x+e.velocity.x,d=e.center.y+e.velocity.y,c>this.bounds.xMax?c-=this.bounds.dimensions.x:c<this.bounds.xMin&&(c+=this.bounds.dimensions.x),d>this.bounds.yMax?d-=this.bounds.dimensions.y:d<this.bounds.yMin&&(d+=this.bounds.dimensions.y),e.setCenter(new Point(c,d)),this.pointSprites[a].position.x=c,this.pointSprites[a].position.y=d,a++,this.tree.insert(e);this.canvas.clear(),this.circles?(this.renderSprite.alpha=0,this.renderSprite.setTexture(this.canvasHolder.generateTexture()),this.renderSprite.alpha=1,this.circleFill(this.tree)):(this.renderSprite.alpha=0,this.drawTree(this.tree))}return this.render&&(this.renderSprite.alpha=0,this.canvas.lineStyle(null),this.colourTree(this.tree),this.render=!1),this.circles&&!this.moving&&(this.canvas.clear(),this.renderSprite.alpha=1,this.renderSprite.setTexture(this.canvasHolder.generateTexture()),this.circleFill(this.tree),this.circles=!1),null}},b.prototype.resize=function(){return null},b.prototype.generateNewMap=function(){var a,b,c,d,e,f,g,h;if(this.pointSprites.length>0)for(a=d=g=this.pointSprites.length-1;0>=g?0>=d:d>=0;a=0>=g?++d:--d)c=this.pointSprites[a],this.pointSprites.splice(a,1),this.deadSprites.push(c),this.pointHolder.removeChild(c);for(this.tree.clear(),this.generatePoints(),this.addPointSprites(),h=this.points,e=0,f=h.length;f>e;e++)b=h[e],this.tree.insert(b);return this.renderSprite.alpha=0,this.canvas.clear(),this.drawTree(this.tree),null},b.prototype.drawTree=function(a){var b,c,d,e;for(this.canvas.lineStyle(1,15987699),this.canvas.drawRect(a.boundsAABB.xMin,a.boundsAABB.yMin,a.boundsAABB.dimensions.x,a.boundsAABB.dimensions.y),e=a.children,c=0,d=e.length;d>c;c++)b=e[c],this.drawTree(b);return null},b.prototype.colourTree=function(a){var b,c,d,e,f;for(0!==a.children.length&&this.childless||(c=this.getColour(a),this.canvas.beginFill(c),this.canvas.drawRect(a.boundsAABB.xMin,a.boundsAABB.yMin,a.boundsAABB.dimensions.x,a.boundsAABB.dimensions.y),this.canvas.endFill()),f=a.children,d=0,e=f.length;e>d;d++)b=f[d],this.colourTree(b);return null},b.prototype.circleFill=function(a){var b,c,d,e,f;for(c=this.getColour(a),0!==a.children.length&&this.childless||(this.canvas.clear(),this.canvas.lineStyle(1,c),this.canvas.drawCircle(a.boundsAABB.center.x,a.boundsAABB.center.y,.5*a.boundsAABB.dimensions.x),this.renderSprite.setTexture(this.canvasHolder.generateTexture())),f=a.children,d=0,e=f.length;e>d;d++)b=f[d],this.circleFill(b);return null},b.prototype.getColour=function(a){var b,c,d,e,f,g,h;return g=a.boundsAABB.center.x-this.bounds.center.x,h=a.boundsAABB.center.y-this.bounds.center.y,e=Math.sqrt(g*g+h*h),c=Math.atan2(h,g),b=MathUtils.radToDeg(c),0>b&&(b+=360),f=10+90*(e/this.bounds.dimensions.x),d=100-70*(a.boundsAABB.dimensions.x/this.bounds.dimensions.x),ColourConversion.hsbToHex([b,f,d])},b.prototype.generatePoints=function(){var a,b,c,d,e,f;for(this.points=[],a=e=0,f=this.numPoints;f>=0?f>e:e>f;a=f>=0?++e:--e)c=this.bounds.xMin+Math.random()*this.bounds.dimensions.x,d=this.bounds.yMin+Math.random()*this.bounds.dimensions.y,b=new AABB(new Point(c,d),new Point(10,10)),this.points.push(b),b.velocity={x:-2+4*Math.random(),y:-2+4*Math.random()};return null},b.prototype.addPointSprites=function(){var a,b,c,d,e,f;for(this.pointSprites=[],e=this.points,f=[],c=0,d=e.length;d>c;c++)a=e[c],0===this.deadSprites.length?(b=new PIXI.Sprite(this.circleTex),b.anchor.x=b.anchor.y=.5):(b=this.deadSprites[0],this.deadSprites.splice(0,1)),b.position.x=a.center.x,b.position.y=a.center.y,this.pointHolder.addChild(b),f.push(this.pointSprites.push(b));return f},b}(Sketch),Radar=function(a){function b(a,c){this.renderer=a,this.name=c,this.createSprites=__bind(this.createSprites,this),this.scaleSprites=__bind(this.scaleSprites,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name),this.midX=.5*window.innerWidth,this.midY=.5*window.innerHeight}return __extends(b,a),b.prototype.numSprites=60,b.prototype.radarWidth=579,b.prototype.minScale=.1,b.prototype.maxScale=.3,b.prototype.rotation=0,b.prototype.rotationSpeed=238,b.prototype.midX=400,b.prototype.midY=300,b.prototype.sprites=[],b.prototype.load=function(){var a=this;return this.loaded||(this.makeGui(),this.gui.add(this,"rotationSpeed",.1,359.9),this.gui.add(this,"radarWidth",10,1e3),this.gui.add(this,"minScale",.1,10).onFinishChange(function(){return a.scaleSprites()}),this.gui.add(this,"maxScale",.1,10).onFinishChange(function(){return a.scaleSprites()}),this.holder=new PIXI.DisplayObjectContainer,this.renderTexture=new PIXI.RenderTexture(window.innerWidth,window.innerHeight),this.renderTexture2=new PIXI.RenderTexture(window.innerWidth,window.innerHeight),this.dummy=new PIXI.Graphics,this.dummy.beginFill(0,.05),this.dummy.drawRect(0,0,window.innerWidth,window.innerHeight),this.currentTexture=this.renderTexture,this.canvas=new PIXI.Sprite(this.currentTexture),this.holder.addChild(this.canvas),this.view.addChild(this.holder),this.createSprites()),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e,f;if(b.__super__.update.call(this),!this.cancelled){for(this.rotation+=this.rotationSpeed,c=MathUtils.degToRad(this.rotation),a=e=0,f=this.numSprites-1;f>=0?f>=e:e>=f;a=f>=0?++e:--e)this.sprite=this.sprites[a],this.sprite.position.x=this.midX+Math.cos(c)*(this.radarWidth/this.numSprites)*a,this.sprite.position.y=this.midY+Math.sin(c)*(this.radarWidth/this.numSprites)*a;return d=this.renderTexture,this.renderTexture=this.renderTexture2,this.renderTexture2=d,this.canvas.setTexture(this.renderTexture),this.renderTexture2.render(this.holder,new PIXI.Point(0,0),!1),this.renderTexture2.render(this.dummy,new PIXI.Point(0,0),!1),null}},b.prototype.resize=function(){return null},b.prototype.scaleSprites=function(){var a,b,c,d;for(a=c=0,d=this.numSprites-1;d>=0?d>=c:c>=d;a=d>=0?++c:--c)b=this.minScale+Math.random()*(this.maxScale-this.minScale),TweenMax.to(this.sprites[a].scale,2,{x:b,y:b,ease:Bounce.easeOut});return null},b.prototype.createSprites=function(){var a,b,c,d,e;for(c=360/this.numSprites,a=d=0,e=this.numSprites-1;e>=0?e>=d:d>=e;a=e>=0?++d:--d)this.sprite=new PIXI.Sprite(window.app.textures[0]),this.sprite.pivot.x=this.sprite.pivot.y=16,this.sprite.scale.x=this.sprite.scale.y=this.minScale+Math.random()*(this.maxScale-this.minScale),b=MathUtils.degToRad(a*c),this.sprite.position.x=this.midX+this.radarWidth/this.numSprites*a,this.sprite.position.y=this.midY,this.holder.addChild(this.sprite),this.sprites.push(this.sprite);return null},b}(Sketch),Ribbon=function(a){function b(a,c){this.renderer=a,this.name=c,this.drawRibbon=__bind(this.drawRibbon,this),this.updateTrails=__bind(this.updateTrails,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){return this.loaded||(this.midx=.5*window.innerWidth,this.midy=.5*window.innerHeight,this.baseNode=new Node(this.midx,this.midy),this.baseNode.xSin=0,this.baseNode.ySin=0,this.baseNode.xIncrement=2.9,this.baseNode.yIncrement=3.7,this.baseNode.xOffset=470,this.baseNode.yOffset=220,this.ribbonWidth=200,this.trailLength=60,this.tailColour=16777215,this.nodeA=new Node(this.baseNode.position.x,this.baseNode.position.y-this.ribbonWidth),this.nodeB=new Node(this.baseNode.position.x,this.baseNode.position.y+this.ribbonWidth),this.nodeA.recordedPositions=this.nodeB.recordedPositions=this.trailLength,this.nodeA.fillPositions(),this.nodeB.fillPositions(),this.nodeA.sin=0,this.nodeB.sin=0,this.nodeA.inc=4.6,this.nodeB.inc=3.2,this.graphics=new PIXI.Graphics,this.tailA=[],this.tailB=[],this.view.addChild(this.graphics),this.makeGui(),this.gui.add(this,"ribbonWidth",1,200),this.gui.addColor(this,"tailColour"),this.gui.add(this.baseNode,"xOffset",0,1e3),this.gui.add(this.baseNode,"yOffset",0,1e3),this.gui.add(this.baseNode,"xIncrement",.1,359.9),this.gui.add(this.baseNode,"yIncrement",.1,359.9),this.gui.add(this.nodeA,"inc",.1,359.9),this.gui.add(this.nodeB,"inc",.1,359.9)),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a;return b.__super__.update.call(this),this.cancelled?void 0:(this.baseNode.xSin+=this.baseNode.xIncrement,this.baseNode.xSin%=360,this.baseNode.ySin+=this.baseNode.yIncrement,this.baseNode.ySin%=360,this.baseNode.position.x=this.midx+Math.cos(MathUtils.degToRad(this.baseNode.xSin))*this.baseNode.xOffset,this.baseNode.position.y=this.midy+Math.cos(MathUtils.degToRad(this.baseNode.ySin))*this.baseNode.yOffset,this.nodeA.sin+=this.nodeA.inc,this.nodeA.sin%=360,a=this.baseNode.position.y-Math.sin(MathUtils.degToRad(this.nodeA.sin))*this.ribbonWidth,this.nodeA.moveTo(this.baseNode.position.x,a),this.nodeB.sin+=this.nodeB.inc,this.nodeB.sin%=360,a=this.baseNode.position.y+Math.sin(MathUtils.degToRad(this.nodeB.sin))*this.ribbonWidth,this.nodeB.moveTo(this.baseNode.position.x,a),this.drawRibbon(),null)},b.prototype.resize=function(){return null},b.prototype.updateTrails=function(){var a,b,c,d;for(a=c=0,d=this.trailLength-1;d>=0?d>=c:c>=d;a=d>=0?++c:--c)b=this.tailA[a],b.position.x=this.nodeA.positions[a].x,b.position.y=this.nodeA.positions[a].y,b=this.tailB[a],b.position.x=this.nodeB.positions[a].x,b.position.y=this.nodeB.positions[a].y;return null},b.prototype.drawRibbon=function(){var a,b,c,d,e,f,g,h;for(this.graphics.clear(),b=1/this.trailLength,a=g=0,h=this.trailLength-2;h>=0?h>=g:g>=h;a=h>=0?++g:--g)c=this.nodeA.positions[a],d=this.nodeB.positions[a],e=this.nodeA.positions[a+1],f=this.nodeB.positions[a+1],this.graphics.beginFill(this.tailColour,a*b),this.graphics.moveTo(c.x,c.y),this.graphics.lineTo(e.x,e.y),this.graphics.lineTo(f.x,f.y),this.graphics.lineTo(d.x,d.y),this.graphics.endFill();return null},b}(Sketch),ShapeShifter=function(a){function b(a,c){this.renderer=a,this.name=c,this.placeNodes=__bind(this.placeNodes,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){var a,c,d,e,f=this;this.loaded||(this.holder=new PIXI.DisplayObjectContainer,this.holder.position.x=.5*window.innerWidth,this.holder.position.y=.5*window.innerHeight,this.view.addChild(this.holder),this.shapes=["cube","cylinder","torus","sphere","sphere2","cone"],this.curShape=0,this.size=10,this.spacing=32,this.xOffset=0,this.yOffset=0,this.isometricScale=1,this.focalLength=70,this.cameraPosition=1e3,this.depthOn=!1,this.perspectiveOn=!0,this.numNodes=this.size*this.size*this.size,this.nodes=this.createNodes(),this.sprites=this.createSprites(),this.placeSprites(),this.makeGui(),this.gui.add(this,"depthOn").listen().onFinishChange(function(){return f.depthOn&&f.perspectiveOn?f.perspectiveOn=!1:void 0}).name("Isometric"),a=this.gui.addFolder("Isometric Controls"),a.add(this,"isometricScale",1,3).name("Zoom"),this.gui.add(this,"perspectiveOn").listen().onFinishChange(function(){return f.depthOn&&f.perspectiveOn?f.depthOn=!1:void 0}).name("Perspective"),a=this.gui.addFolder("Perspective Controls"),a.add(this,"focalLength",1,300).name("Focal Length"),a.add(this,"cameraPosition",0,2e3).name("Z position")),e=this.nodes;for(c in e)d=e[c],d.position.x=d.position.y=d.position.z=0;return TweenMax.to(this,.75,{onComplete:this.placeNodes}),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e;return b.__super__.update.call(this),this.cancelled?void 0:(window.app.mousePressed&&(window.app.mousePressed=!1,this.placeNodes()),e=window.innerWidth,a=window.innerHeight,d=.5*window.innerWidth,c=.5*window.innerHeight,this.xOffset=(window.app.pointerPosition.x-d)/e*360,this.yOffset=(window.app.pointerPosition.y-c)/a*360,this.placeSprites(),null)},b.prototype.resize=function(){return null},b.prototype.createNodes=function(){var a,b,c,d,e,f,g,h,i;for(d={},e=f=g=0,a=this.spacing*this.size*.5,b=h=0,i=this.numNodes;i>=0?i>h:h>i;b=i>=0?++h:--h)c=new Node,d[e+"_"+f+"_"+g]=c,e++,e===this.size&&(e=0,f++,f===this.size&&(f=0,g++));return d},b.prototype.placeNodes=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(e=this.spacing*this.size*.5,g=0,h=360/this.size,i=360/(this.size*this.size),p=s=0,v=this.size;v>=0?v>s:s>v;p=v>=0?++s:--s)for(q=t=0,w=this.size;w>=0?w>t:t>w;q=w>=0?++t:--t)for(r=u=0,x=this.size;x>=0?x>u:u>x;r=x>=0?++u:--u)j=this.nodes[p+"_"+q+"_"+r],"cube"===this.shapes[this.curShape]?(y=p*this.spacing-e,z=q*this.spacing-e,A=r*this.spacing-e):"cylinder"===this.shapes[this.curShape]?(c=this.size*p+q,a=MathUtils.degToRad(c*i),m=e*(r/this.size),y=Math.cos(a)*m,z=q*this.spacing-e,A=Math.sin(a)*m):"torus"===this.shapes[this.curShape]?(c=this.size*p+q,k=MathUtils.degToRad(c*i),n=MathUtils.degToRad(r*h),l=128,o=64,y=(l+o*Math.cos(n))*Math.cos(k),A=(l+o*Math.cos(n))*Math.sin(k),z=Math.sin(n)*o):"sphere"===this.shapes[this.curShape]?(c=this.size*p+q,a=MathUtils.degToRad(c*i),b=.5*MathUtils.degToRad(r*h),m=128,A=m*Math.cos(a)*Math.sin(b),z=m*Math.sin(a)*Math.sin(b),y=m*Math.cos(b)):"sphere2"===this.shapes[this.curShape]?(a=MathUtils.degToRad(q*h),b=.5*MathUtils.degToRad(r*h),m=128/this.size*p,y=m*Math.cos(a)*Math.sin(b),A=m*Math.sin(a)*Math.sin(b),z=m*Math.cos(b)):"cone"===this.shapes[this.curShape]&&(c=this.size*p+r,a=MathUtils.degToRad(c*i),f=128,d=q/this.size*f,m=e,y=m*Math.cos(a)*((f-d)/f),z=-(d-.5*f),A=m*Math.sin(a)*((f-d)/f)),TweenMax.killTweensOf(j.position),TweenMax.to(j.position,1.5,{x:y,y:z,z:A,ease:Elastic.easeOut,delay:.2*Math.random()}),g++;return this.curShape++,this.curShape===this.shapes.length&&(this.curShape=0),null},b.prototype.createSprites=function(){var a,b,c,d,e;for(c=[],a=d=0,e=this.numNodes;e>=0?e>d:d>e;a=e>=0?++d:--d)b=new PIXI.Sprite(window.app.textures[0]),b.pivot.x=b.pivot.y=16,this.holder.addChild(b),c.push(b);return c},b.prototype.placeSprites=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(b=0,d=Math.log(.1),c=Math.log(1),h=k=0,n=this.size;n>=0?n>k:k>n;h=n>=0?++k:--k)for(i=l=0,o=this.size;o>=0?o>l:l>o;i=o>=0?++l:--l)for(j=m=0,p=this.size;p>=0?p>m:m>p;j=p>=0?++m:--m)g=this.sprites[b],e=this.nodes[h+"_"+i+"_"+j],f=0,this.depthOn?(f=e.position.z/(this.spacing*this.size),g.scale.x=g.scale.y=(1+Math.exp(d+f))*this.isometricScale,g.position.x=e.position.x*g.scale.x+f*this.xOffset,g.position.y=e.position.y*g.scale.y+f*this.yOffset):this.perspectiveOn?(a=this.focalLength+(e.position.z-this.cameraPosition),f=0!==a?this.focalLength/a:0,g.scale.x=g.scale.y=10*f,g.position.x=10*(e.position.x-this.xOffset)*f,g.position.y=10*-(e.position.y-this.yOffset)*f):(g.scale.x=g.scale.y=1,g.position.x=e.position.x,g.position.y=e.position.y),g.alpha=.4,b++;return null},b}(Sketch),SineWave=function(a){function b(a,c){this.renderer=a,this.name=c,this.createSprites=__bind(this.createSprites,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.id="Sine Wave",b.prototype.phase=0,b.prototype.limit=360,b.prototype.waveLength=203,b.prototype.amplitude=260,b.prototype.frequency=10,b.prototype.rotateAngle=0,b.prototype.rotateSpeed=351.16,b.prototype.numSprites=100,b.prototype.midY=0,b.prototype.sprites=[],b.prototype.load=function(){return this.midY=.5*window.innerHeight,this.midX=.5*window.innerWidth,this.loaded||(this.createSprites(),this.makeGui(),this.gui.add(this,"waveLength",10,1e3),this.gui.add(this,"amplitude",10,500),this.gui.add(this,"frequency",1,100),this.gui.add(this,"limit",1,360),this.gui.add(this,"rotateSpeed",0,720),this.gui.close()),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n;if(b.__super__.update.call(this),!this.cancelled){for(g=window.innerWidth/this.numSprites,c=m=0,n=this.numSprites;n>=m;c=m+=1)f=this.sprites[c],i=c*g+this.phase/360*this.waveLength,j=i%this.waveLength/this.waveLength*360,l=this.midY+Math.sin(MathUtils.degToRad(j))*this.amplitude,h=i-this.midX,k=l-this.midY,a=MathUtils.degToRad(this.rotateAngle),d=h*Math.cos(a)-k*Math.sin(a),e=h*Math.sin(a)+k*Math.cos(a),f.position.x=this.midX+d,f.position.y=this.midY+e;return this.phase+=this.frequency,this.phase%=this.limit,this.rotateAngle+=this.rotateSpeed,this.rotateAngle%=360,null}},b.prototype.createSprites=function(){var a,b,c,d,e;for(c=window.innerWidth/this.numSprites,a=d=0,e=this.numSprites;e>=d;a=d+=1)b=new PIXI.Sprite(window.app.textures[0]),b.pivot.x=b.pivot.y=16,b.position.x=a*c,b.position.y=this.midY,this.sprites.push(b),this.view.addChild(b);return null},b}(Sketch),Plankton=function(a){function b(){this.drawLimbs=__bind(this.drawLimbs,this),this.newDirection=__bind(this.newDirection,this),this.updateTail=__bind(this.updateTail,this),this.update=__bind(this.update,this);var a,c;b.__super__.constructor.call(this,Math.random()*window.innerWidth,Math.random()*window.innerHeight,0),this.view=new PIXI.DisplayObjectContainer,this.graphics=new PIXI.Graphics,this.view.addChild(this.graphics),this.gut=new PIXI.Sprite(window.app.textures[0]),this.gut.pivot.x=this.gut.pivot.y=16,c=[360*Math.random(),100,100],a=ColourConversion.hsbToHex(c),this.gut.tint=a,this.view.addChild(this.gut),this.angle=0,this.newDirection(),this.tailProps={min:18,max:32,dir:-1,dist:0},this.tailProps.dist=this.tailProps.min+Math.random()*(this.tailProps.max-this.tailProps.min),this.tailProps.inSpeed=.95+.04*Math.random(),this.tailProps.outSpeed=1.05+.14*Math.random(),this.tailProps.accel=.7+1*Math.random(),this.tailProps.decel=.85+.1*Math.random(),this.view.scale.x=this.view.scale.y=this.tailProps.decel,this.tail=new PIXI.Sprite(window.app.textures[0]),this.tail.pivot.x=this.tail.pivot.y=16,this.tail.scale.x=this.tail.scale.y=.5,this.tail.position.y=this.tailProps.dist,this.view.addChild(this.tail),this.tailRight=new PIXI.Sprite(window.app.textures[0]),this.tailRight.pivot.x=this.tailRight.pivot.y=16,this.tailRight.scale.x=this.tailRight.scale.y=.25,this.tailRight.position.y=this.tailProps.dist,this.tailRight.position.x=this.tailProps.dist,this.view.addChild(this.tailRight),this.tailLeft=new PIXI.Sprite(window.app.textures[0]),this.tailLeft.pivot.x=this.tailLeft.pivot.y=16,this.tailLeft.scale.x=this.tailLeft.scale.y=.25,this.tailLeft.position.y=this.tailProps.dist,this.tailLeft.position.x=-this.tailProps.dist,this.view.addChild(this.tailLeft)}return __extends(b,a),b.prototype.update=function(){var a,b,c,d;return this.graphics.clear(),this.updateTail(),this.drawLimbs(),1===this.tailProps.dir?(b=Math.sin(MathUtils.degToRad(this.angle)),a=Math.cos(MathUtils.degToRad(this.angle)),c=1*-b*this.tailProps.accel,d=1*a*this.tailProps.accel,this.velocity.x+=c,this.velocity.y+=d):(this.velocity.x*=this.tailProps.decel,this.velocity.y*=this.tailProps.decel),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y<-100?this.position.y+=window.innerHeight+200:this.position.y>window.innerHeight+100&&(this.position.y-=window.innerHeight+200),this.position.x<-100?this.position.x+=window.innerWidth+200:this.position.x>window.innerWidth+100&&(this.position.x-=window.innerWidth+200),this.view.position.x=this.position.x,this.view.position.y=this.position.y,this.view.rotation=MathUtils.degToRad(this.angle+180),null},b.prototype.updateTail=function(){var a,b,c,d;return-1===this.tailProps.dir?(this.tailProps.dist*=this.tailProps.inSpeed,this.tailProps.dist<this.tailProps.min&&(this.tailProps.dir*=-1)):(this.tailProps.dist*=this.tailProps.outSpeed,this.tailProps.dist>this.tailProps.max&&(this.tailProps.dir*=-1)),this.tail.position.y=this.tailProps.dist,d=Math.sin(MathUtils.degToRad(30)),a=Math.cos(MathUtils.degToRad(30)),b=-d*this.tailProps.dist,c=a*this.tailProps.dist,this.tailLeft.position.x=b,this.tailLeft.position.y=c,d=Math.sin(MathUtils.degToRad(-30)),a=Math.cos(MathUtils.degToRad(-30)),b=-d*this.tailProps.dist,c=a*this.tailProps.dist,this.tailRight.position.x=b,this.tailRight.position.y=c,null},b.prototype.newDirection=function(){var a,b,c=this;return TweenMax.killTweensOf(this),a=360*Math.random(),b=.5+3*Math.random(),TweenMax.to(this,b,{angle:a,onComplete:function(){return c.newDirection()}}),null},b.prototype.drawLimbs=function(){return this.graphics.lineStyle(1,16765136,.9),this.graphics.moveTo(this.gut.position.x,this.gut.position.y),this.graphics.lineTo(this.tail.position.x,this.tail.position.y),this.graphics.moveTo(this.gut.position.x,this.gut.position.y),this.graphics.lineTo(this.tailRight.position.x,this.tailRight.position.y),this.graphics.moveTo(this.gut.position.x,this.gut.position.y),this.graphics.lineTo(this.tailLeft.position.x,this.tailLeft.position.y),null},b}(Node),SpirographNode=function(a){function b(a,c,d){null==a&&(a=0),null==c&&(c=0),null==d&&(d=0),this.drawTrails=__bind(this.drawTrails,this),this.updateTint=__bind(this.updateTint,this),this.update=__bind(this.update,this),this.randomise=__bind(this.randomise,this),b.__super__.constructor.call(this,a,c,d),this.midX=.5*window.innerWidth,this.midY=.5*window.innerHeight,this.sin=0,this.speed=1,this.radSin=0,this.radSpeed=10,this.radMin=180,this.radMax=260,this.tailWidth=3,this.color=120,this.colorSpeed=0,this.hsb=[this.color,100,100],this.hex=ColourConversion.hsbToHex(this.hsb),this.recordedPositions=90,this.positions=[],this.fillPositions(),this.view=new PIXI.DisplayObjectContainer,this.graphics=new PIXI.Graphics,this.view.addChild(this.graphics),this.randomSpeeds=[.1,1.1,59.9,60.4,120.1,180.6,240.2,300.1,75.5,25.2],this.randomSmallRads=[0,30,60,180,90,45,40,75,130,140,150,160],this.randomBigRads=[227,240,300,248,200,187,210,195,320,305,310]}return __extends(b,a),b.prototype.randomise=function(){var a,b,c,d;return c=this.randomSpeeds[Math.floor(Math.random()*this.randomSpeeds.length)],d=this.randomSpeeds[Math.floor(Math.random()*this.randomSpeeds.length)],a=this.randomSmallRads[Math.floor(Math.random()*this.randomSmallRads.length)],b=this.randomBigRads[Math.floor(Math.random()*this.randomBigRads.length)],TweenMax.to(this,1.5,{radMin:a,radMax:b,speed:c,radSpeed:d,colorSpeed:Math.random()}),null},b.prototype.update=function(){var a,b,c;return this.radSin+=this.radSpeed,this.radSin%=360,a=this.radMin+Math.sin(MathUtils.degToRad(this.radSin))*(this.radMax-this.radMin),this.sin+=this.speed,this.sin%=360,b=-Math.sin(MathUtils.degToRad(this.sin))*a,c=Math.cos(MathUtils.degToRad(this.sin))*a,this.moveTo(b+this.midX,c+this.midY,0),this.color+=this.colorSpeed,this.color%=360,this.drawTrails(),null},b.prototype.updateTint=function(){return this.hsb=[this.color,100,100],this.hex=ColourConversion.hsbToHex(this.hsb),null},b.prototype.drawTrails=function(){var a,b,c,d,e,f,g;for(this.graphics.clear(),b=1/this.recordedPositions,e=this.tailWidth/this.recordedPositions,c=this.positions[0],d=null,a=f=0,g=this.positions.length-1;g>=0?g>f:f>g;a=g>=0?++f:--f)c=this.positions[a],d=this.positions[a+1],this.hsb=[this.color,100,100],this.hex=ColourConversion.hsbToHex(this.hsb),this.graphics.lineStyle(a*e,this.hex,a*b),this.graphics.moveTo(c.x,c.y),this.graphics.lineTo(d.x,d.y);return null},b}(Node),SquidNode=function(a){function b(a,c,d){var e,f,g;for(null==a&&(a=0),null==c&&(c=0),null==d&&(d=0),this.drawNodePath=__bind(this.drawNodePath,this),this.update=__bind(this.update,this),this.setTailColor=__bind(this.setTailColor,this),this.setColor=__bind(this.setColor,this),b.__super__.constructor.call(this,0,0,d),this.basePosition={x:a,y:c},this.color=0,this.tailColor=0,this.view=new PIXI.DisplayObjectContainer,this.graphics=new PIXI.Graphics,this.view.addChild(this.graphics),this.head=new PIXI.Sprite(window.app.textures[0]),this.head.pivot.x=this.head.pivot.y=16,this.view.addChild(this.head),this.setColor(this.color),this.tailWidth=3,this.tailSpread=40,this.recordedPositions=120,this.positions=[],this.firstUpdate=!0,this.nodes=[],e=g=0;5>g;e=++g)f=new Node,f.recordedPositions=this.recordedPositions,f.fillPositions(),f.sin=360*Math.random(),f.inc=2+3*Math.random(),this.nodes.push(f);
this.sin=0,this.speed=1,this.radSin=0,this.radSpeed=5,this.radMin=200,this.radMax=240}return __extends(b,a),b.prototype.setColor=function(a){return this.color=a,this.hsb=[this.color,100,100],this.hex=ColourConversion.hsbToHex(this.hsb),this.head.tint=this.hex,null},b.prototype.setTailColor=function(a){return this.tailColor=a,null},b.prototype.update=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;for(this.sin+=this.speed,this.sin%=360,this.radSin+=this.radSpeed,this.radSin%=360,h=Math.sin(MathUtils.degToRad(this.sin)),g=Math.cos(MathUtils.degToRad(this.sin)),k=this.radMin+Math.sin(MathUtils.degToRad(this.radSin))*(this.radMax-this.radMin),m=-h*k,o=g*k,this.moveTo(this.basePosition.x+m,this.basePosition.y+o),this.firstUpdate&&(this.fillPositions(),this.firstUpdate=!1),this.head.position.x=this.position.x,this.head.position.y=this.position.y,a=1/this.recordedPositions,l=this.tailWidth/this.recordedPositions,this.graphics.clear(),c=q=0,t=this.positions.length-1;t>=0?t>q:q>t;c=t>=0?++q:--q)i=this.positions[c],j=this.positions[c+1],this.graphics.lineStyle(c*l,this.hex,c*a),this.graphics.moveTo(i.x,i.y),this.graphics.lineTo(j.x,j.y);for(u=this.nodes,r=0,s=u.length;s>r;r++)d=u[r],d.sin+=d.inc,d.sin%=360,m=0,o=Math.sin(MathUtils.degToRad(d.sin))*this.tailSpread,n=this.positions[this.recordedPositions-2].x-this.positions[this.recordedPositions-1].x,p=this.positions[this.recordedPositions-2].y-this.positions[this.recordedPositions-1].y,b=Math.atan2(p,n),e=-Math.sin(b)*o,f=Math.cos(b)*o,d.moveTo(e,f),this.drawNodePath(d);return null},b.prototype.drawNodePath=function(a){var b,c,d,e,f,g,h,i,j,k;for(b=1/this.recordedPositions,i=this.tailWidth/this.recordedPositions,h=1,c=j=0,k=a.positions.length-1;k>=0?k>j:j>k;c=k>=0?++j:--j)f=a.positions[c],g=a.positions[c+1],d=this.positions[c],e=this.positions[c+1],h=1-c/this.recordedPositions,this.graphics.lineStyle(c*i,this.hex,c*b),this.graphics.moveTo(d.x+f.x*h,d.y+f.y*h),this.graphics.lineTo(e.x+g.x*h,e.y+g.y*h);return null},b}(Node),Smoky=function(a){function b(a,c){this.renderer=a,this.name=c,this.mouseMove=__bind(this.mouseMove,this),this.update=__bind(this.update,this),this.resize=__bind(this.resize,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),this.checkDistSq=this.checkDist*this.checkDist,b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.id="Smoky",b.prototype.numNodes=200,b.prototype.checkDist=100,b.prototype.checkDistSq=0,b.prototype.nodes=[],b.prototype.sprites=[],b.prototype.load=function(){return this.loaded?(this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.areaWidth=this.windowWidth+400,this.areaHeight=this.windowHeight+400,b.__super__.load.call(this),void 0):(this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.areaWidth=this.windowWidth+400,this.areaHeight=this.windowHeight+400,this.createNodes(),this.createSprites(),b.__super__.load.call(this))},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.resize=function(){return null},b.prototype.createNodes=function(){var a,b,c,d;for(a=c=0,d=this.numNodes;d>=c;a=c+=1)b=new Node(Math.random()*this.windowWidth,Math.random()*this.windowHeight),b.velocity.x=3-6*Math.random(),b.velocity.y=3-6*Math.random(),b.sinPos=360*Math.random(),b.sinIncrement=.5*Math.random(),b.scaleAmount=2*Math.random(),this.nodes.push(b);return null},b.prototype.createSprites=function(){var a,b,c,d;for(this.tex=window.app.textures[0],a=c=0,d=this.numNodes;d>=c;a=c+=1)b=new PIXI.Sprite(this.tex),b.pivot.x=16,b.pivot.y=16,b.blendMode=PIXI.blendModes.SCREEN,b.alpha=.1+.2*Math.random(),this.sprites.push(b),this.view.addChild(b);return null},b.prototype.updateSprites=function(){var a,b,c,d,e,f;for(b=e=0,f=this.numNodes;f>=e;b=e+=1)c=this.nodes[b],c.position.x+=c.velocity.x,c.position.y+=c.velocity.y,c.sinPos+=c.sinIncrement,c.sinPos%=360,c.scale=10+Math.sin(c.sinPos*(Math.PI/180))*c.scaleAmount,c.position.x>this.windowWidth+200?c.position.x-=this.areaWidth:c.position.x<-200&&(c.position.x+=this.areaWidth),c.position.y>this.windowHeight+200?c.position.y-=this.areaHeight:c.position.y<-200&&(c.position.y+=this.areaHeight),a=this.distanceTo({x:c.position.x,y:c.position.y},{x:this.curX,y:this.curY}),a.dist<this.checkDistSq&&(c.velocity.x=-1*a.xDif/this.checkDist*5,c.velocity.y=-1*a.yDif/this.checkDist*5),d=this.sprites[b],d.position.x=c.position.x,d.position.y=c.position.y,d.scale.x=d.scale.y=c.scale;return null},b.prototype.distanceTo=function(a,b){var c,d;return c=b.x-a.x,d=b.y-a.y,{xDif:c,yDif:d,dist:c*c+d*d}},b.prototype.update=function(){return b.__super__.update.call(this),this.cancelled?void 0:(this.curX=window.app.pointerPosition.x,this.curY=window.app.pointerPosition.y,this.updateSprites(),null)},b.prototype.mouseMove=function(a){return this.curX=a.pageX,this.curY=a.pageY,null},b}(Sketch),Spirals=function(a){function b(a,c){this.renderer=a,this.name=c,this.createSprite=__bind(this.createSprite,this),this.createNode=__bind(this.createNode,this),this.distToMidpoint=__bind(this.distToMidpoint,this),this.updateNodes=__bind(this.updateNodes,this),this.randomisePattern=__bind(this.randomisePattern,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.id="Spirals",b.prototype.midPoint=null,b.prototype.nodes=[],b.prototype.deadNodes=[],b.prototype.newNodeCount=1,b.prototype.newNodeLimit=10,b.prototype.changeCount=720,b.prototype.changeLimit=720,b.prototype.rotateSpeed=11,b.prototype.moveSpeed=.6,b.prototype.sqDist=100,b.prototype.load=function(){var a=this;return this.loaded||(this.makeGui(),this.gui.add(this,"rotateSpeed",-50,50).listen().onChange(function(){return a.changeCount=a.changeLimit}),this.gui.add(this,"moveSpeed",.1,10).listen().onChange(function(){return a.changeCount=a.changeLimit}),this.gui.close()),this.midPoint={x:.5*window.innerWidth,y:.5*window.innerHeight},this.sqDist=.5*window.innerWidth*.5*window.innerWidth,this.randomisePattern(),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a;return b.__super__.update.call(this),this.cancelled?void 0:(window.app.spacePressed&&(this.changeCount=this.changeLimit,window.app.spacePressed=!1,this.randomisePattern()),this.newNodeCount--,0===this.newNodeCount&&(this.newNodeCount=this.newNodeLimit,a=this.createNode(),this.nodes.push(a),this.view.addChild(a.sprite)),this.changeCount--,0===this.changeCount&&(this.randomisePattern(),this.changeCount=this.changeLimit),this.updateNodes(),null)},b.prototype.resize=function(){return null!==this.midPoint&&(this.midPoint.x=.5*window.innerWidth,this.midPoint.y=.5*window.innerHeight),this.sqDist=.5*window.innerWidth*.5*window.innerWidth,null},b.prototype.randomisePattern=function(){return TweenMax.to(this,.5,{rotateSpeed:-50+100*Math.random(),ease:Power4.easeOut}),TweenMax.to(this,.5,{moveSpeed:3*Math.random(),ease:Power4.easeOut}),null},b.prototype.updateNodes=function(){var a,b,c,d,e,f,g;for(b=f=g=this.nodes.length-1;f>=0;b=f+=-1)e=this.nodes[b],e.y+=this.moveSpeed,a=MathUtils.degToRad(e.phase),c=-e.y*Math.sin(a),d=e.y*Math.cos(a),e.sprite.position.x=this.midPoint.x+c,e.sprite.position.y=this.midPoint.y+d,e.phase+=this.rotateSpeed,e.phase%=360,e.sprite.scale.x=e.sprite.scale.y=.25+this.distToMidpoint(e)/this.sqDist*4,c-80+this.midPoint.x>window.innerWidth&&(this.view.removeChild(e.sprite),this.nodes.splice(b,1),this.deadNodes.push(e));return null},b.prototype.distToMidpoint=function(a){var b,c;return b=this.midPoint.x-a.sprite.position.x,c=this.midPoint.y-a.sprite.position.y,b*b+c*c},b.prototype.createNode=function(){var a;return 0===this.deadNodes.length?a={y:0,x:0,sprite:this.createSprite(),phase:0}:(a=this.deadNodes[0],this.deadNodes.splice(0,1),a.y=0,a.x=0,a.phase=0),a},b.prototype.createSprite=function(){var a;return a=new PIXI.Sprite(window.app.textures[0]),a.pivot.x=16,a.pivot.y=16,a},b}(Sketch),Spirograph=function(a){function b(a,c){this.renderer=a,this.name=c,this.addNode=__bind(this.addNode,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){return this.loaded||(this.makeGui(),this.nodes=[],this.addNode(),this.addNode(),this.addNode()),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e;if(b.__super__.update.call(this),!this.cancelled){for(e=this.nodes,c=0,d=e.length;d>c;c++)a=e[c],a.update();return null}},b.prototype.resize=function(){return null},b.prototype.addNode=function(){var a,b;return b=new SpirographNode,this.nodes.push(b),b.color=360*Math.random(),b.updateTint(),this.view.addChild(b.view),1===this.nodes.length?(b.speed=59.9,b.radSpeed=122):2===this.nodes.length?(b.speed=60,b.radSpeed=61):3===this.nodes.length&&(b.speed=60,b.radSpeed=119),b.colorSpeed=Math.random(),a=this.gui.addFolder("Spirograph "+this.nodes.length),a.add(b,"speed",.1,359.9).listen(),a.add(b,"radSpeed",.1,359.9).listen(),a.add(b,"radMin",.1,500).listen(),a.add(b,"radMax",.1,500).listen(),a.add(b,"tailWidth",1,30),a.add(b,"color",0,360),a.add(b,"colorSpeed",0,1).listen(),a.add(b,"recordedPositions",1,360),a.add(b,"randomise"),null},b}(Sketch),Squids=function(a){function b(a,c){this.renderer=a,this.name=c,this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.random2=__bind(this.random2,this),this.random1=__bind(this.random1,this),this.random0=__bind(this.random0,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){var a,c,d,e;if(!this.loaded){for(this.makeGui(),this.squids=[],c=e=0;3>e;c=++e)d=new SquidNode(.25*window.innerWidth*(c+1),.5*window.innerHeight),d.speed=1+5*Math.random(),d.radSpeed=1+36*Math.random(),a=360*Math.random(),d.setColor(a),d.setTailColor(a),this.view.addChild(d.view),this.squids.push(d);this.gui.add(this,"random0"),this.gui.add(this,"random1"),this.gui.add(this,"random2")}return b.__super__.load.call(this),null},b.prototype.random0=function(){var a,b;return b=this.squids[0],b.speed=1+5*Math.random(),b.radSpeed=1+36*Math.random(),a=360*Math.random(),b.setColor(a),b.setTailColor(a),null},b.prototype.random1=function(){var a,b;return b=this.squids[1],b.speed=1+5*Math.random(),b.radSpeed=1+36*Math.random(),a=360*Math.random(),b.setColor(a),b.setTailColor(a),null},b.prototype.random2=function(){var a,b;return b=this.squids[2],b.speed=1+5*Math.random(),b.radSpeed=1+36*Math.random(),a=360*Math.random(),b.setColor(a),b.setTailColor(a),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e;if(b.__super__.update.call(this),!this.cancelled){for(e=this.squids,c=0,d=e.length;d>c;c++)a=e[c],a.update();return null}},b.prototype.resize=function(){return null},b}(Sketch),Stacks=function(a){function b(a,c){this.renderer=a,this.name=c,this.randomiseSpeeds=__bind(this.randomiseSpeeds,this),this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.yCount=30,b.prototype.xCount=40,b.prototype.minSpeed=-40,b.prototype.maxSpeed=40,b.prototype.tgtScale=1,b.prototype.nodes=[],b.prototype.deadNodes=[],b.prototype.load=function(){var a=this;return this.loaded||(this.makeGui(),this.createSprites(),this.gui.add(this,"minSpeed",-40,40).listen().onChange(function(){return a.maxSpeed<a.minSpeed&&(a.minSpeed=a.maxSpeed),a.randomiseSpeeds()}),this.gui.add(this,"maxSpeed",-40,40).listen().onChange(function(){return a.maxSpeed<a.minSpeed&&(a.minSpeed=a.maxSpeed),a.randomiseSpeeds()})),b.__super__.load.call(this),null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){return b.__super__.update.call(this),this.cancelled?void 0:(this.updateNodes(),null)},b.prototype.resize=function(){return null},b.prototype.updateNodes=function(){var a,b,c,d,e,f,g,h,i,j,k;for(f=window.innerWidth,a=h=0,j=this.xCount-1;j>=0?j>=h:h>=j;a=j>=0?++h:--h)for(b=i=0,k=this.yCount-1;k>=0?k>=i:i>=k;b=k>=0?++i:--i)d=this.nodes[a][b],d.sprite.position.x+=d.speed,d.sprite.position.x<=0?(d.sprite.position.x=.1,d.speed*=-1):d.sprite.position.x>=f&&(d.sprite.position.x=f-.1,d.speed*=-1),this.nodes[a+1]&&d.sprite.position.x>=this.nodes[a+1][b].sprite.position.x-16*this.tgtScale&&(g=Math.abs(d.sprite.position.x-this.nodes[a+1][b].sprite.position.x)-16.2*this.tgtScale,0>g&&(g*=-1),c=this.nodes[a+1][b].speed,e=c+d.speed,this.nodes[a+1][b].speed=d.speed,d.speed=c,d.sprite.position.x-=.5*g,this.nodes[a+1][b].sprite.position.x+=.5*g);return null},b.prototype.createSprites=function(){var a,b,c,d,e,f;for(this.tgtScale=window.innerHeight/(this.yCount-1)/30,this.nodes=[],a=c=0,e=this.xCount-1;e>=0?e>=c:c>=e;a=e>=0?++c:--c)for(this.nodes[a]=[],b=d=0,f=this.yCount-1;f>=0?f>=d:d>=f;b=f>=0?++d:--d)this.nodes[a][b]={sprite:this.addSprite(a,b),speed:0};return this.randomiseSpeeds(),null},b.prototype.addSprite=function(a,b){var c;return c=new PIXI.Sprite(window.app.textures[0]),c.pivot.x=c.pivot.y=16,c.position.x=a*(window.innerWidth/this.xCount),c.position.y=30*b*this.tgtScale,c.scale.x=c.scale.y=this.tgtScale,this.view.addChild(c),c},b.prototype.randomiseSpeeds=function(){var a,b,c,d,e,f,g;for(c=this.maxSpeed-this.minSpeed,a=d=0,f=this.xCount-1;f>=0?f>=d:d>=f;a=f>=0?++d:--d)for(b=e=0,g=this.yCount-1;g>=0?g>=e:e>=g;b=g>=0?++e:--e)this.nodes[a][b].speed=this.minSpeed+Math.random()*c;return null},b}(Sketch),TessellationOne=function(a){function b(a,c){this.renderer=a,this.name=c,this.resize=__bind(this.resize,this),this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.redraw=__bind(this.redraw,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name)}return __extends(b,a),b.prototype.load=function(){var a;return this.loaded||(this.makeGui(),this.unitSize=10,this.tiles={},this.tileLayers=[],this.curLayer=0,this.maxLayers=20,this.scale=1,a=new PIXI.Graphics,this.drawTile(a),this.tileTex=a.generateTexture(),this.spriteHolder=new PIXI.DisplayObjectContainer,this.spriteHolder.position.x=.5*window.innerWidth,this.spriteHolder.position.y=.5*window.innerHeight,this.view.addChild(this.spriteHolder),this.gui.add(this,"maxLayers",2,50).name("Max Layers").onFinishChange(this.redraw),this.gui.add(this,"scale",.1,1).name("Tile Scale").onFinishChange(this.redraw)),this.redraw(),b.__super__.load.call(this),null},b.prototype.redraw=function(){for(var a;this.spriteHolder.children.length>0;)this.spriteHolder.removeChild(this.spriteHolder.children[0]);return this.tiles={},this.tileLayers=[],this.curLayer=0,a=new PIXI.Sprite(this.tileTex),a.anchor.x=a.anchor.y=.5,a.scale.x=a.scale.y=this.scale,a.xref=a.yref=0,this.spriteHolder.addChild(a),this.tileLayers.push([a]),this.tiles["0_0"]=a},b.prototype.drawTile=function(a){return a.beginFill(16777215),this.drawVert(a,-1,-3),a.endFill(),a.beginFill(16777215),this.drawVert(a,-2,0),a.endFill(),a.beginFill(7829367),this.drawHori(a,-3,-2),a.endFill(),a.beginFill(7829367),this.drawHori(a,0,-1),a.endFill(),null},b.prototype.drawVert=function(a,b,c){return a.moveTo(b*this.unitSize*this.scale,c*this.unitSize*this.scale),a.lineTo((b+2)*this.unitSize*this.scale,c*this.unitSize*this.scale),a.lineTo((b+2)*this.unitSize*this.scale,(c+2)*this.unitSize*this.scale),a.lineTo((b+3)*this.unitSize*this.scale,(c+2)*this.unitSize*this.scale),a.lineTo((b+3)*this.unitSize*this.scale,(c+3)*this.unitSize*this.scale),a.lineTo((b+1)*this.unitSize*this.scale,(c+3)*this.unitSize*this.scale),a.lineTo((b+1)*this.unitSize*this.scale,(c+1)*this.unitSize*this.scale),a.lineTo(b*this.unitSize*this.scale,(c+1)*this.unitSize*this.scale),a.lineTo(b*this.unitSize*this.scale,c*this.unitSize*this.scale),null},b.prototype.drawHori=function(a,b,c){return a.moveTo(b*this.unitSize*this.scale,(c+1)*this.unitSize*this.scale),a.lineTo((b+2)*this.unitSize*this.scale,(c+1)*this.unitSize*this.scale),a.lineTo((b+2)*this.unitSize*this.scale,c*this.unitSize*this.scale),a.lineTo((b+3)*this.unitSize*this.scale,c*this.unitSize*this.scale),a.lineTo((b+3)*this.unitSize*this.scale,(c+2)*this.unitSize*this.scale),a.lineTo((b+1)*this.unitSize*this.scale,(c+2)*this.unitSize*this.scale),a.lineTo((b+1)*this.unitSize*this.scale,(c+3)*this.unitSize*this.scale),a.lineTo(b*this.unitSize*this.scale,(c+3)*this.unitSize*this.scale),a.lineTo(b*this.unitSize*this.scale,(c+1)*this.unitSize*this.scale),null},b.prototype.addLayer=function(){var a,b,c,d,e,f,g,h,i,j,k;for(e=[],k=this.tileLayers[this.curLayer],i=0,j=k.length;j>i;i++)f=k[i],g=f.xref,h=f.yref,a=g+2+"_"+(h+4),b=g-4+"_"+(h+2),c=g-2+"_"+(h-4),d=g+4+"_"+(h-2),void 0===this.tiles[a]&&(this.tiles[a]=this.addTile(g+2,h+4),e.push(this.tiles[a])),void 0===this.tiles[b]&&(this.tiles[b]=this.addTile(g-4,h+2),e.push(this.tiles[b])),void 0===this.tiles[c]&&(this.tiles[c]=this.addTile(g-2,h-4),e.push(this.tiles[c])),void 0===this.tiles[d]&&(this.tiles[d]=this.addTile(g+4,h-2),e.push(this.tiles[d]));return this.tileLayers.push(e),this.curLayer++,null},b.prototype.addTile=function(a,b){var c;return c=new PIXI.Sprite(this.tileTex),c.anchor.x=c.anchor.y=.5,c.scale.x=c.scale.y=this.scale,c.xref=a,c.yref=b,c.position.x=a*this.unitSize*this.scale,c.position.y=b*this.unitSize*this.scale,c.alpha=1-this.curLayer/this.maxLayers,this.spriteHolder.addChild(c),c},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){return b.__super__.update.call(this),this.cancelled?void 0:(this.curLayer<this.maxLayers&&this.addLayer(),null)},b.prototype.resize=function(){return null},b}(Sketch),Trails=function(a){function b(a,c){this.renderer=a,this.name=c,this.update=__bind(this.update,this),this.unload=__bind(this.unload,this),this.load=__bind(this.load,this),b.__super__.constructor.call(this,this.renderer,this.name),this.toAdd=1e-11,this.sinIncrement=MathUtils.twoPI/18}return __extends(b,a),b.id="Trails",b.prototype.trailLength=70,b.prototype.sprites=[],b.prototype.positions=[],b.prototype.sinOffset=0,b.prototype.sinIncrement=0,b.prototype.maxScale=4,b.prototype.minScale=1,b.prototype.wobbleAngle=17,b.prototype.load=function(){var a,c,d,e,f=this;if(this.loaded)this.gui.domElement.style.display="block",this.gui.close(),b.__super__.load.call(this);else{for(this.curX=this.mouseX=.5*window.innerWidth,this.curY=this.mouseY=.5*window.innerHeight,a=d=0,e=this.trailLength-1;e>=d;a=d+=1)c=new PIXI.Sprite(window.app.textures[0]),c.alpha=0,c.pivot.x=16,c.pivot.y=16,this.view.addChild(c),this.sprites.push(c);this.makeGui(),this.gui.add(this,"sinIncrement",0,MathUtils.twoPI/5),this.gui.add(this,"wobbleAngle",0,90),this.gui.add(this,"maxScale",0,10).listen().onChange(function(){return f.maxScale<f.minScale?f.minScale=f.maxScale:void 0}),this.gui.add(this,"minScale",0,10).listen().onChange(function(){return f.minScale>f.maxScale?f.maxScale=f.minScale:void 0}),this.gui.close(),b.__super__.load.call(this)}return null},b.prototype.unload=function(){return b.__super__.unload.call(this),null},b.prototype.update=function(){var a,c,d,e,f,g,h,i,j,k,l;if(b.__super__.update.call(this),!this.cancelled){for(a=MathUtils.degToRad(Math.sin(this.sinOffset)*this.wobbleAngle),h=window.app.pointerPosition.x-this.curX,i=window.app.pointerPosition.y-this.curY,d=h*Math.cos(a)-i*Math.sin(a),e=h*Math.sin(a)+i*Math.cos(a),this.curX+=d/100,this.curY+=e/100,this.positions.push({x:this.curX,y:this.curY}),this.positions.length>this.trailLength&&this.positions.splice(0,1),l=this.positions,f=j=0,k=l.length;k>j;f=++j)g=l[f],this.sprites[f].scale.x=this.minScale+f/this.trailLength*this.maxScale,this.sprites[f].scale.y=this.minScale+f/this.trailLength*this.maxScale,this.sprites[f].position.x=g.x,this.sprites[f].position.y=g.y,this.sprites[f].alpha=f/this.trailLength;return c=Math.sqrt(h*h+i*i),0===c&&(c=1),this.toAdd=MathUtils.degToRad(30/c),this.sinOffset+=this.sinIncrement+this.toAdd,this.sinOffset%=MathUtils.twoPI,null}},b}(Sketch),Menu=function(){function a(a,b,c){var d,e,f;this.app=a,this.data=b,this.renderer=c,this.checkAngleDistance=__bind(this.checkAngleDistance,this),this.updateButtonTint=__bind(this.updateButtonTint,this),this.updateMenuText=__bind(this.updateMenuText,this),this.update=__bind(this.update,this),this.disable=__bind(this.disable,this),this.enable=__bind(this.enable,this),this.resize=__bind(this.resize,this),this.hide=__bind(this.hide,this),this.show=__bind(this.show,this),this.view=new PIXI.DisplayObjectContainer,this.bgAlpha=.9,this.bg=new PIXI.Graphics,this.view.addChild(this.bg),this.resize(),this.isOpen=!0,this.buttons=[],this.buttonSprites=[],this.buttonSize=20,this.radius=.5*Math.min(window.innerWidth,window.innerHeight)-50,this.createButtons(),e=this.buttons[1].position.x-this.buttons[0].position.x,f=this.buttons[1].position.y-this.buttons[0].position.y,d=Math.sqrt(e*e+f*f),this.overScale=.5*d/this.buttonSize,this.currentButton=this.buttons[this.app.currentSketch],this.menuText=new PIXI.Text(this.currentButton.name,{font:"300 27px Lato",fill:"#e3e3e3"}),this.menuText.anchor.x=.5,this.menuText.anchor.y=.5,this.menuText.position.x=Math.round(.5*window.innerWidth),this.menuText.position.y=Math.round(.5*window.innerHeight),this.view.addChild(this.menuText)}return a.prototype.show=function(){return TweenMax.killTweensOf(this.view.position),TweenMax.to(this.view.position,.3,{y:0,ease:Power4.easeOut}),this.isOpen=!0,null},a.prototype.hide=function(){return this.isOpen=!1,TweenMax.killTweensOf(this.view.position),TweenMax.to(this.view.position,.3,{y:window.innerHeight,ease:Power4.easeOut}),null},a.prototype.resize=function(){return this.bg.clear(),this.bg.beginFill(0,this.bgAlpha),this.bg.drawRect(0,0,window.innerWidth,window.innerHeight),this.bg.endFill(),null},a.prototype.enable=function(){return null},a.prototype.disable=function(){return null},a.prototype.update=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.view.position.y!==window.innerHeight){for(g=.5*window.innerHeight-this.app.pointerPosition.y,f=.5*window.innerWidth-this.app.pointerPosition.x,b=MathUtils.radToDeg(Math.atan2(g,f)),b+=180,e=180,d=h=0,k=this.buttons.length;k>=0?k>h:h>k;d=k>=0?++h:--h)this.buttonSprites[d].position.x=.5*window.innerWidth+this.buttons[d].position.x,this.buttonSprites[d].position.y=.5*window.innerHeight+this.buttons[d].position.y,c=this.checkAngleDistance(b,this.buttons[d].angle),e>c&&(e=c,this.currentButton=this.buttons[d]);for(l=this.buttons,i=0,j=l.length;j>i;i++)a=l[i],a!==this.currentButton||a.active?a.active&&a!==this.currentButton&&(a.active=!1,TweenMax.killTweensOf(this.buttonSprites[a.id].scale),TweenMax.killTweensOf(a),TweenMax.to(this.buttonSprites[a.id].scale,1.2,{x:1,y:1,ease:Elastic.easeOut}),TweenMax.to(a,1.2,{s:0,onUpdate:this.updateButtonTint,onUpdateParams:[a],ease:Power4.easeOut})):(a.active=!0,this.view.addChild(this.buttonSprites[a.id]),TweenMax.killTweensOf(this.buttonSprites[a.id].scale),TweenMax.killTweensOf(a),TweenMax.killTweensOf(this.menuText),TweenMax.to(this.buttonSprites[a.id].scale,1.2,{x:this.overScale,y:this.overScale,ease:Elastic.easeOut}),TweenMax.to(a,.3,{s:100,onUpdate:this.updateButtonTint,onUpdateParams:[a],ease:Power4.easeOut}),TweenMax.to(this.menuText,.15,{alpha:0,ease:Power4.easeOut,onComplete:this.updateMenuText}));return null}},a.prototype.updateMenuText=function(){return this.menuText.setText(this.currentButton.name),TweenMax.to(this.menuText,.15,{alpha:1,ease:Power4.easeOut}),null},a.prototype.updateButtonTint=function(a){return this.buttonSprites[a.id].tint=ColourConversion.hsbToHex([a.angle,a.s,a.b]),null},a.prototype.checkAngleDistance=function(a,b){var c;return c=Math.abs(a-b),c>180&&(c=360-c),c},a.prototype.createButtons=function(){var a,b,c,d,e,f,g;for(c=360/this.data.length,b=f=0,g=this.data.length;g>=0?g>f:f>g;b=g>=0?++f:--f)d=Math.cos(MathUtils.degToRad(c*b))*this.radius,e=Math.sin(MathUtils.degToRad(c*b))*this.radius,a=new Node(d,e),a.angle=c*b,a.id=b,a.name=this.data[b].classId,a.active=!1,a.s=0,a.b=100,this.buttons.push(a),this.createButtonSprite(d,e);return null},a.prototype.createButtonSprite=function(a,b){var c;return c=new PIXI.Graphics,c.beginFill(14935011),c.drawCircle(0,0,this.buttonSize),c.endFill(),c.position.x=a,c.position.y=b,this.buttonSprites.push(c),this.view.addChild(c),null},a}(),PWPData=function(){function a(){}return a.prototype.data=[{className:Smoky,classId:"Smoky",description:"Everyone starts with particles, right? Anyway, I was mucking around with them and liked the sort of smoky, foggy look the sprite had when it was really big.",instructions:"Just wiggle your mouse about to disturb the smoke a little."},{className:Trails,classId:"Trails",description:"Mouse trails are pretty ubiquitous too. This one looked more alive when I was wiggling my mouse, so I've added a heading vector that fluctuates across an angle spread. Smaller sizes work better on smaller screens.",instructions:"A simple mouse trail."},{className:Dots,classId:"Dots",description:"I've always loved LED grids, chuck in some rhythmic patterns and they hypnotise me. I might come back to this and write an image/text parser for it.",instructions:"Lots of settings for this one\nHave a play"},{className:Spirals,classId:"Spirals",description:"Nature is full of Spirals and they're lovely to look at. This one moves between random selections which alters the patterns produced. The strobing effect makes it look more complicated than it is and becomes almost kaleidoscopic. I may have stared at this one for hours.",instructions:"It changes automagically, but hitting space will force a new random selection"},{className:SineWave,classId:"Sine Wave",description:"A lot of the previous experiments used sine values of some sort and they look pretty cool too. This one started out as a plain old sine wave, but I chucked in some rotation after staring at spirals and it makes some equally pleasing patterns when it strobes.",instructions:"Play with the settings in this one"},{className:Stacks,classId:"Stacks",description:"It's sort of like an abacus.",instructions:"Just watch it"},{className:Fractals,classId:"Fractals",description:"....",instructions:"...."},{className:Radar,classId:"Radar",description:"....",instructions:"...."},{className:Ribbon,classId:"Ribbon",description:"....",instructions:"...."},{className:Orbits,classId:"Orbits",description:"....",instructions:"...."},{className:Comets,classId:"Comets",description:"....",instructions:"...."},{className:PlanktonTank,classId:"PlanktonTank",description:"....",instructions:"...."},{className:Spirograph,classId:"Spirograph",description:"....",instructions:"...."},{className:Squids,classId:"Squids",description:"....",instructions:"...."},{className:PictureTile,classId:"PictureTile",description:"....",instructions:"...."},{className:ShapeShifter,classId:"ShapeShifter",description:"....",instructions:"...."},{className:QuadTreeTest,classId:"QuadTreeTest",description:"....",instructions:"...."},{className:TessellationOne,classId:"TessellationOne",description:"....",instructions:"...."},{className:Penrose,classId:"Penrose",description:"....",instructions:"...."},{className:BasicGrid,classId:"BasicGrid",description:"....",instructions:"...."}],a}(),App=function(){function a(){this.update=__bind(this.update,this),this.removeGui=__bind(this.removeGui,this),this.selectSketch=__bind(this.selectSketch,this),this.prev=__bind(this.prev,this),this.next=__bind(this.next,this),this.handleKeyPress=__bind(this.handleKeyPress,this),this.handleMove=__bind(this.handleMove,this),this.handleEnd=__bind(this.handleEnd,this),this.handleStart=__bind(this.handleStart,this);var a,b,c,d,e=this;for(this.data=(new PWPData).data,this.spacePressed=!1,this.infoOpen=!0,this.renderer=PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight),this.stage=new PIXI.Stage(657930),document.body.appendChild(this.renderer.view),this.textures=[PIXI.Texture.fromImage("img/node.png")],this.sketches=[],d=this.data,b=0,c=d.length;c>b;b++)a=d[b],this.sketches.push({sketch:new a.className(this.renderer,a.classId),id:a.classId});this.numSketches=this.sketches.length,this.currentSketch=this.sketches.length-1,this.sketchHolder=new PIXI.DisplayObjectContainer,this.bg=new PIXI.Graphics,this.bg.beginFill(657930),this.bg.drawRect(0,0,window.innerWidth,window.innerHeight),this.bg.endFill(),this.sketchHolder.addChild(this.bg),this.menuPanel=new Menu(this,this.data),this.info=document.getElementById("wrapper"),this.stage.addChild(this.sketchHolder),this.sketchHolder.addChild(this.menuPanel.view),this.buttonHolder=new PIXI.DisplayObjectContainer,this.buttonHolder.position.x=-64,this.buttonHolder.position.y=window.innerHeight,this.stage.addChild(this.buttonHolder),this.tab=PIXI.Sprite.fromImage("img/menu.png"),this.tab.position.y=-64,this.buttonHolder.addChild(this.tab),this.tab.interactive=!0,this.tab.buttonMode=!0,this.infoTab=PIXI.Sprite.fromImage("img/info.png"),this.infoTab.position.x=65,this.buttonHolder.addChild(this.infoTab),this.infoTab.interactive=!0,this.infoTab.buttonMode=!0,this.pointerPosition={x:.5*window.innerWidth,y:.5*window.innerHeight},this.mousePressed=!1,this.enableObject(this.sketchHolder),this.sketchHolder.hitArea=new PIXI.Rectangle(0,0,window.innerWidth,window.innerHeight),Modernizr.touch?(this.tab.tap=function(){return e.infoOpen?void 0:(TweenMax.killTweensOf(e.buttonHolder.position),TweenMax.to(e.buttonHolder.position,.3,{x:-64,ease:Power4.easeOut,onComplete:e.menuPanel.show}),null)},this.info.ontouchend=function(){return e.infoOpen=!1,TweenMax.to(e.info,.3,{css:{left:"-100%"},ease:Power4.easeOut}),TweenMax.to(e.infoTab.position,.3,{y:-64,ease:Power4.easeOut,delay:.3}),null},this.infoTab.tap=function(){return e.infoOpen=!0,TweenMax.to(e.infoTab.position,.3,{y:0,ease:Power4.easeOut}),TweenMax.to(e.info,.3,{css:{left:0},ease:Power4.easeOut,delay:.3}),null}):(this.tab.mouseup=function(){return e.infoOpen?void 0:(TweenMax.killTweensOf(e.buttonHolder.position),TweenMax.to(e.buttonHolder.position,.3,{x:-64,ease:Power4.easeOut,onComplete:e.menuPanel.show}),null)},this.info.onclick=function(){return e.infoOpen=!1,TweenMax.to(e.info,.3,{css:{left:"-100%"},ease:Power4.easeOut}),TweenMax.to(e.infoTab.position,.3,{y:-64,ease:Power4.easeOut,delay:.3}),null},this.infoTab.mouseup=function(){return e.infoOpen=!0,TweenMax.to(e.infoTab.position,.3,{y:0,ease:Power4.easeOut}),TweenMax.to(e.info,.3,{css:{left:0},ease:Power4.easeOut,delay:.3}),null}),window.onresize=function(){var a,b,c,d;for(e.menuPanel.resize(),e.buttonHolder.position.y=window.innerHeight,e.renderer.resize(window.innerWidth,window.innerHeight),e.bg.clear(),e.bg.beginFill(e.stageColor),e.bg.drawRect(0,0,window.innerWidth,window.innerHeight),e.bg.endFill(),e.sketchHolder.hitArea=new PIXI.Rectangle(0,0,window.innerWidth,window.innerHeight),d=e.sketches,b=0,c=d.length;c>b;b++)a=d[b],a.sketch.resize();return null},window.onkeyup=this.handleKeyPress,requestAnimationFrame(this.update)}return a.prototype.enableObject=function(a){return a.interactive=!0,Modernizr.touch?(a.touchstart=this.handleStart,a.touchend=this.handleEnd,a.touchmove=this.handleMove):(a.mousemove=this.handleMove,a.mousedown=this.handleStart,a.mouseup=this.handleEnd,a.mouseupoutside=this.handleEnd),null},a.prototype.handleStart=function(a){return this.mousePressed=!0,this.pointerPosition.x=a.global.x,this.pointerPosition.y=a.global.y,null},a.prototype.handleEnd=function(){return this.mousePressed=!1,this.menuPanel.isOpen&&!this.infoOpen&&(this.selectSketch(this.menuPanel.currentButton.id),this.menuPanel.hide(),TweenMax.to(this.buttonHolder.position,.3,{x:0,ease:Power4.easeOut,delay:.3})),null
},a.prototype.handleMove=function(a){return this.pointerPosition.x=a.global.x,this.pointerPosition.y=a.global.y,null},a.prototype.handleKeyPress=function(a){var b;return a.preventDefault(),b=a.keyCode?a.keyCode:a.charCode,37===b?this.prev():39===b?this.next():32===b&&(this.spacePressed=!0),null},a.prototype.next=function(){var a;return a=this.sketches[this.currentSketch],this.changeSketch("next"),this.unloadSketch(a.sketch),this.menuPanel.updateInfoContent(),null},a.prototype.prev=function(){var a;return a=this.sketches[this.currentSketch],this.changeSketch("prev"),this.unloadSketch(a.sketch),this.menuPanel.updateInfoContent(),null},a.prototype.selectSketch=function(a){var b;if(a!==this.currentSketch)return b=this.sketches[this.currentSketch],this.currentSketch=a,this.unloadSketch(b.sketch),null},a.prototype.unloadSketch=function(a){return null!==a.gui&&TweenMax.to(a.gui.domElement,.3,{css:{opacity:0},ease:Power4.easeOut}),TweenMax.to(a.view,1,{alpha:0,ease:Power4.easeOut,onComplete:this.removeGui,onCompleteParams:[a]}),null},a.prototype.removeGui=function(a){return a.unload(),this.sketchHolder.removeChild(a.view),null!==a.gui&&document.body.removeChild(a.gui.domElement),this.loadCurrentSketch(),null},a.prototype.changeSketch=function(a){return"next"===a?this.currentSketch++:"prev"===a&&this.currentSketch--,this.currentSketch===this.sketches.length?this.currentSketch=0:this.currentSketch<0&&(this.currentSketch=this.sketches.length-1),null},a.prototype.loadCurrentSketch=function(){return this.sketches[this.currentSketch].sketch.load(),this.sketches[this.currentSketch].sketch.view.alpha=0,this.sketchHolder.addChildAt(this.sketches[this.currentSketch].sketch.view,1),null!==this.sketches[this.currentSketch].sketch.gui&&(this.sketches[this.currentSketch].sketch.gui.domElement.style.opacity=0,document.body.appendChild(this.sketches[this.currentSketch].sketch.gui.domElement),TweenMax.to(this.sketches[this.currentSketch].sketch.gui.domElement,.3,{css:{opacity:1},ease:Power4.easeOut,delay:.5})),TweenMax.to(this.sketches[this.currentSketch].sketch.view,1,{alpha:1,ease:Power4.easeOut}),null},a.prototype.update=function(){return this.menuPanel.update(),this.sketches[this.currentSketch].sketch.loaded&&this.sketches[this.currentSketch].sketch.update(),this.renderer.render(this.stage),requestAnimationFrame(this.update),null},a}();